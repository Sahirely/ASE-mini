<link rel="stylesheet" href="AngularJS/Detalle/Styles/detalle.css">
<link href="Libraries/css/slick/slick.css" rel="stylesheet">
<link href="Libraries/css/slick/slick-theme.css" rel="stylesheet">
<div ng-init="init()">
    <div class="headTitleTallerCita">
        <div class="title title-xs">
            Orden {{numeroOrden}}
            <div class="text-orden">{{detalleOrden.nombreTipoOrden}} </div>
        </div>
        <!-- LOGO DE LA OPERACIÓN -->
        <div class="idOperacion pull-right">
            <img id="logoImg" src="../image/resources/{{ userData.contratoOperacionSeleccionada }}.png" alt="Logo Operación">
        </div>
    </div>
    <div class="wrapper wrapper-content">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-content">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <div class="row">
                                <span class="label label-default mayusculas" ng-show="Precancelacion==false">{{detalleOrden.nombreEstatusOrden}}</span>
                                <span class="label label-default mayusculas" ng-show="Precancelacion">Pre-Cancelacion</span>
                                <span class="label label-success mayusculas" ng-show="estadoCompra == true">{{procesarCompra}} </span>
                            </div>
                            <div class="progressPrincipal">
                                <table id="padreTimeLine">
                                    <tr>
                                        <td ng-repeat='historico in HistoricoOrden' class="containerTimeline" style="width: {{100 / HistoricoOrden.length}}%;" ng-class="{'activeTimeLine':historico.idOrden>0, '':''}">
                                            <span class="m-b-xs">
                                            <strong>{{historico.nombreEstatusOrden}}</strong>
                                            </span>
                                            <br>
                                            <span class="glyphicon glyphicon-user" ng-show="historico.idOrden>0">
                                            </span>{{historico.nombreCompleto}}
                                            <br>
                                            <span class="fechaTimeLine" ng-show="historico.idOrden>0">
                                            <strong>{{historico.fecha | date:"MM/dd/yyyy h:mma" : 'UTC' }}</strong>
                                            </span>
                                            <div class="dias" ng-hide="historico.idOrden == 0">
                                                {{historico.dias}}
                                            </div>
                                            <div class="arrow-right"></div>
                                        </td>
                                    </tr>
                                </table>
                                <!-- FIN NUEVO DISEÑO DE TIMELINE -->
                                <div ng-repeat="cotz in HistoricoCotizaciones | orderBy:'consecutivo'" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                    <div id="numCotizacion" class="col-xs-3 col-sm-3 col-md-3 col-lg-3 center">{{cotz.data[0].numeroCotizacion}}</div>
                                    <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                                        <table id="subTimeLine">
                                            <tr>
                                                <td ng-repeat="cot in cotz.data" class="containerSubTimeline" style="width: {{100 / cotz.data.length}}%;" ng-class="{'activeSubTimeLine':cot.idCotizacion>0, '':''}">
                                                    <span class="m-b-xs">
                                                    <strong>{{cot.nombreEstatusCotizacion}}</strong>
                                                    </span>
                                                    <br>
                                                    <span class="glyphicon glyphicon-user" ng-show="cot.idCotizacion>0">
                                                    </span>{{cot.nombreCompleto}}
                                                    <br>
                                                    <span class="fechaTimeLine" ng-show="cot.idCotizacion>0">
                                                    <strong>{{cot.fecha | date:"MM/dd/yyyy h:mma" : 'UTC'}}</strong>
                                                    </span>
                                                    <div class="arrow-right-sub"></div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <!-- TIEMPO -->
                            <div class=" timeContainer pull-right" ng-class="{conTiempo: sinTiempoDisponible == 0, sinTiempo: sinTiempoDisponible == 1}" ng-show="userData.tiempoAsignado == 1">
                                <div class="TiempoTranscurrido">
                                    {{tiempoTranscurridoDisplay}}
                                </div>
                                <div class="pull-right">
                                    <i class="fa fa-clock-o reloj"></i>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="hr-line-dashed"></div>
                        </div>
                        
                        <div class="row" ng-if="versionSystem == 1">
                            <div class="row animated fadeInRight">
                                <div class="col-md-3">
                                    <div id="map" style="width:100%;height:300px"></div>
                                    <!-- <div dx-map="mapOptions"></div> -->
                                    <img ng-hide="hasGPS" src="image/resources/noGPS.png" class="imgNOGPS">
                                </div>
                                <div class="col-md-4">
                                    <div class="ibox float-e-margins">
                                        <div class="ibox-title">
                                            <h5>{{detalleOrden.tipoUnidad}} {{detalleOrden.numeroEconomico}}</h5>
                                        </div>
                                        <div>
                                            <div id="imageCARContent" class="ibox-content no-padding border-left-right">
                                                <img id="imageCAR" alt="image" class="img-responsive" src="{{ detalleOrden != null ? (detalleOrden.foto != '' ? urldocs + '/partidas/' + detalleOrden.foto : '') : '' }}">
                                            </div>
                                            <div class="ibox-content profile-content">
                                                <h4><strong>{{detalleOrden.marca}}</strong></h4>
                                                <p><i class="fa fa-map-marker"></i> {{detalleOrden.subMarca}}</p>
                                                <div class="row ">
                                                    <div class="col-md-4">
                                                        <div class="client-avatar"> <img src="../image/resources/gsi.png" alt="foto"> </div>
                                                        <h5>{{detalleOrden.tipoCombustible}}</h5>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div class="client-avatar"> <img src="../image/resources/ci.png" alt="foto"> </div>
                                                        <h5>{{detalleOrden.cilindros}}</h5>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div class="client-avatar"> <img src="../image/resources/mdl.png" alt="foto"> </div>
                                                        <h5><strong>MODELO</strong> {{detalleOrden.modelo}}</h5>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-5">
                                    <!-- TEST TILEVIEW -->
                                    <div class="demo-container" ng-app="registrationModule" ng-controller="detalleController">
                                        <div dx-tile-view="tileViewOptions" dx-item-alias="home">
                                            <div class="price" ng-class="{ 'reddi': home.estatusVigencia == 0 }">{{home.descripcion }} <span ng-hide="home.vigencia == null">- {{ home.vigencia |  date:'dd/MM/yy' }}</span>                                                </div>

                                            <a ng-if="home.tipo == 1" href="{{home.foto}}" data-lightbox="roadtrip" data-title="{{home.descrpcion}}">
                                                <div class="image" ng-style="{'background-image': 'url({{home.foto}})'}"></div>
                                            </a>
                                            <a ng-if="home.tipo == 2" ng-click="openPDF(home.foto);">
                                                <div class="image" ng-style="{'background-image': 'url(../image/resources/file.png)', 'background-size': '70px',
                                                'background-repeat': 'no-repeat' }"></div>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row" ng-show="versionSystem == 2">
                            <div class="row animated fadeInRight">
                                <div class="col-md-3">
                                    <div id="map" style="width:100%;height:300px"></div>
                                    <!-- <div dx-map="mapOptions"></div> -->
                                    <img ng-hide="hasGPS" src="image/resources/noGPS.png" class="imgNOGPS">
                                </div>
                                <!--apartado tipo unidad -->
                                <div class="col-md-4 center">
                                    <br>
                                    <br>
                                    <br>
                                    <button type="button" class="btn btn-primary" ng-click="mostrarTipoUnidadVS2()">Mostrar tipo unidad</button>
                                </div>
                                <!--apartado fotos unidad -->
                                <div class="col-md-5">
                                    <!-- TEST TILEVIEW -->
                                    <div class="demo-container" ng-app="registrationModule" ng-controller="detalleController">
                                        <div ng-repeat="item in tileViewOptions track by $index">
                                            <table class="table table-bordered" ng-if="$index == 0">
                                                <thead>
                                                    <th><b>Descripción</b></th>
                                                    <th><b>Nombre del documento</b></th>
                                                    <th><b>Ver</b></th>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="x in item">
                                                        <td>{{x.descripcion}}</td>
                                                        <td ng-show="x.foto != ''">{{(x.foto).split('/')[4]}}</td>
                                                        <!--<td ng-show="x.foto != ''">{{x.foto}}</td>-->
                                                        <td>
                                                            <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 " tooltip="Ver" ng-click="prueba(x.foto)">
                                                                <i class="fa fa-file-o" style="font-size: 36px;"></i>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <div class="hr-line-dashed"></div>
                        </div>
                        <!-- Eidencias por orden -->
                        <!-- <div class="col-sm-12 col-md-6 col-lg-6" ng-hide="validaCertificado != 0"> -->
                        <!-- <h2>Evidencias</h2> -->
                        <!-- </div> -->
                                                <!-- <div class="col-sm-12 col-md-6 col-lg-6" ng-hide="validaCertificado != 0"> -->
                        <!-- <h2>Evidencias</h2> -->
                        <!-- </div> -->
                        <div class="col-sm-12 col-md-5 col-lg-5">
                        <h3>Catálogo de Evidencias</h3>
                            <div class="row" ng-if="versionSystem == 1">
                                    <carousel interval="'-1'" >
                                        <slide class="itemCarousel" ng-repeat="evidencia in detalleEvidencias">
                                            <!-- active="!$index" -->
                                            <a href="{{evidencia.ruta}}" ng-show="evidencia.tipo == 'jpg'
                                              || evidencia.tipo == 'JPG'
                                              || evidencia.tipo == 'jpeg'
                                              || evidencia.tipo == 'JPEG'
                                              || evidencia.tipo == 'png'
                                              || evidencia.tipo == 'PNG'
                                              || evidencia.tipo == 'gif'
                                              || evidencia.tipo == 'GIG'
                                              || evidencia.tipo == 'bmp'
                                              || evidencia.tipo == 'BMP'" class="documentos" download="">
                                                <img alt="image" title="{{evidencia.tipo}}" class="img-responsive" src="{{evidencia.ruta}}" />
                                            </a>
                                            <div ng-show="evidencia.tipo == 'xml' || evidencia.tipo == 'XML'" class="item-no-img">
                                                <a href="{{evidencia.ruta}}" class="documentos" download="">
                                                    <div class="gal-ico">
                                                        <i class="fa fa-file-code-o" aria-hidden="true"></i>
                                                        <p>{{evidencia.nombreEvidencia}}</p>
                                                    </div>
                                                </a>
                                            </div>
                                            <div ng-show="evidencia.tipo == 'pdf' || evidencia.tipo == 'PDF'" class="item-no-img">
                                                <object style="width: 100%; height: 100%" data="{{evidencia.ruta}}" type="application/pdf">
                                                  <embed src="{{evidencia.ruta}}" type="application/pdf" />
                                              </object>
                                            </div>
                                            <div ng-show="evidencia.tipo == 'xls' || evidencia.tipo == 'xlsx'  || evidencia.tipo == 'XLS' || evidencia.tipo == 'XLSX'" class="item-no-img">
                                                <a href="{{evidencia.ruta}}" class="documentos" download="">
                                                    <div class="gal-ico">
                                                        <i class="fa fa-file-excel-o" aria-hidden="true"></i>
                                                        <p>{{evidencia.nombreEvidencia}}</p>
                                                    </div>
                                                </a>
                                            </div>
                                            <div ng-show="evidencia.tipo == 'txt' || evidencia.tipo == 'TXT'" class="item-no-img">
                                                <a href="{{evidencia.ruta}}" class="documentos" download="">
                                                    <div class="gal-ico">
                                                        <i class="fa fa-file-text-o" aria-hidden="true"></i>
                                                        <p>{{evidencia.nombreEvidencia}}</p>
                                                    </div>
                                                </a>
                                            </div>
                                            <div ng-show="evidencia.tipo == 'zip' || evidencia.tipo == 'rar' || evidencia.tipo == 'ZIP' || evidencia.tipo == 'RAR'" class="item-no-img">
                                                <a href="{{evidencia.ruta}}" class="documentos" download="">
                                                    <div class="gal-ico">
                                                        <i class="fa fa-file-archive-o" aria-hidden="true"></i>
                                                        <p>{{evidencia.nombreEvidencia}}</p>
                                                    </div>
                                                </a>
                                            </div>
                                            <div ng-show="evidencia.tipo == 'doc' || evidencia.tipo == 'docx' || evidencia.tipo == 'DOC' || evidencia.tipo == 'DOCX'" class="item-no-img">
                                                <a href="{{evidencia.ruta}}" class="documentos" download="">
                                                    <div class="gal-ico">
                                                        <i class="fa fa-file-word-o" aria-hidden="true"></i>
                                                        <p>{{evidencia.nombreEvidencia}}</p>
                                                    </div>
                                                </a>
                                            </div>
                                            <div ng-show="evidencia.tipo != 'jpg'
                                              && evidencia.tipo != 'JPG'
                                              && evidencia.tipo != 'jpeg'
                                              && evidencia.tipo != 'JPEG'
                                              && evidencia.tipo != 'png'
                                              && evidencia.tipo != 'PNG'
                                              && evidencia.tipo != 'gif'
                                              && evidencia.tipo != 'GIF'
                                              && evidencia.tipo != 'bmp'
                                              && evidencia.tipo != 'BMP'
                                              && evidencia.tipo != 'xml'
                                              && evidencia.tipo != 'XML'
                                              && evidencia.tipo != 'pdf'
                                              && evidencia.tipo != 'PDF'
                                              && evidencia.tipo != 'xls'
                                              && evidencia.tipo != 'XLS'
                                              && evidencia.tipo != 'xlsx'
                                              && evidencia.tipo != 'XLSX'
                                              && evidencia.tipo != 'txt'
                                              && evidencia.tipo != 'TXT'
                                              && evidencia.tipo != 'zip'
                                              && evidencia.tipo != 'ZIP'
                                              && evidencia.tipo != 'rar'
                                              && evidencia.tipo != 'RAR'
                                              && evidencia.tipo != 'doc'
                                              && evidencia.tipo != 'DOC'
                                              && evidencia.tipo != 'docx'
                                              && evidencia.tipo != 'DOCX'" class="item-no-img">
                                                <a href="{{evidencia.ruta}}" class="documentos" download="">
                                                    <div class="gal-ico">
                                                        <i class="fa fa-file-o" aria-hidden="true"></i>
                                                        <p>{{evidencia.nombreEvidencia}}</p>
                                                    </div>
                                                </a>
                                            </div>
                                        </slide>
                                    </carousel>
                                    <br>
                                    <div class="contenedor" style="width: 100%; height: 150px;">
                                        <table width="100%" border="0" cellspacing="40" cellpadding="40">
                                            <tr>
                                                <td style="width: 200px;" align="center" ng-repeat="evidencia in detalleEvidencias">
                                                    <a href="{{evidencia.ruta}}" class="documentos" download="">
                                                        <div class="gal-ico-thums" ng-show="evidencia.tipo == 'jpg'
                                                            || evidencia.tipo == 'JPG'
                                                            || evidencia.tipo == 'jpeg'
                                                            || evidencia.tipo == 'JPEG'
                                                            || evidencia.tipo == 'png'
                                                            || evidencia.tipo == 'PNG'
                                                            || evidencia.tipo == 'gif'
                                                            || evidencia.tipo == 'GIG'
                                                            || evidencia.tipo == 'bmp'
                                                            || evidencia.tipo == 'BMP'">
                                                            <img alt="image" class="" width="100" src="{{evidencia.ruta}}">
                                                            <p>{{evidencia.nombreEvidencia}}</p>
                                                        </div>
                                                        <div class="gal-ico-thums" ng-show="evidencia.tipo == 'xml'">
                                                            <i class="fa fa-file-code-o" aria-hidden="true"></i>
                                                            <p>{{evidencia.nombreEvidencia}}</p>
                                                        </div>
                                                        <div class="gal-ico-thums" ng-show="evidencia.tipo == 'pdf'">
                                                            <i class="fa fa-file-pdf-o" aria-hidden="true"></i>
                                                            <p>{{evidencia.nombreEvidencia}}</p>
                                                        </div>
                                                        <div class="gal-ico-thums" ng-show="evidencia.tipo == 'xls' || evidencia.tipo == 'xlsx'">
                                                            <i class="fa fa-file-excel-o" aria-hidden="true"></i>
                                                            <p>{{evidencia.nombreEvidencia}}</p>
                                                        </div>
                                                        <div class="gal-ico-thums" ng-show="evidencia.tipo == 'txt'">
                                                            <i class="fa fa-file-text-o" aria-hidden="true"></i>
                                                            <p>{{evidencia.nombreEvidencia}}</p>
                                                        </div>
                                                        <div class="gal-ico-thums" ng-show="evidencia.tipo == 'zip' || evidencia.tipo == 'rar'">
                                                            <i class="fa fa-file-archive-o" aria-hidden="true"></i>
                                                            <p>{{evidencia.nombreEvidencia}}</p>
                                                        </div>
                                                        <div class="gal-ico-thums" ng-show="evidencia.tipo == 'doc' || evidencia.tipo == 'docx'">
                                                            <i class="fa fa-file-word-o" aria-hidden="true"></i>
                                                            <p>{{evidencia.nombreEvidencia}}</p>
                                                        </div>
                                                        <div class="gal-ico-thums" ng-show="
                                                            evidencia.tipo != 'jpg'
                                                            && evidencia.tipo != 'JPG'
                                                            && evidencia.tipo != 'jpeg'
                                                            && evidencia.tipo != 'JPEG'
                                                            && evidencia.tipo != 'png'
                                                            && evidencia.tipo != 'PNG'
                                                            && evidencia.tipo != 'gif'
                                                            && evidencia.tipo != 'GIF'
                                                            && evidencia.tipo != 'bmp'
                                                            && evidencia.tipo != 'BMP'
                                                            && evidencia.tipo != 'xml'
                                                            && evidencia.tipo != 'XML'
                                                            && evidencia.tipo != 'pdf'
                                                            && evidencia.tipo != 'PDF'
                                                            && evidencia.tipo != 'xls'
                                                            && evidencia.tipo != 'XLS'
                                                            && evidencia.tipo != 'xlsx'
                                                            && evidencia.tipo != 'XLSX'
                                                            && evidencia.tipo != 'txt'
                                                            && evidencia.tipo != 'TXT'
                                                            && evidencia.tipo != 'zip'
                                                            && evidencia.tipo != 'ZIP'
                                                            && evidencia.tipo != 'rar'
                                                            && evidencia.tipo != 'RAR'
                                                            && evidencia.tipo != 'doc'
                                                            && evidencia.tipo != 'DOC'
                                                            && evidencia.tipo != 'docx'
                                                            && evidencia.tipo != 'DOCX'
                                                            ">
                                                            <i class="fa fa-file-o" aria-hidden="true"></i>
                                                            <p>{{evidencia.nombreEvidencia}}</p>
                                                        </div>
                                                    </a>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="wrapper wrapper-content">
                                        <br>
                                        <form id="frm_evidencia" name="frm_evidencia" enctype="multipart/form-data" method="post">
                                            <label>Carga Evidencia</label>
                                            <br>
                                            <input type="hidden" value="{{idOrden}}" name="idOrden">
                                            <input type="hidden" value="{{docServer}}" name="docServer">
                                            <input type="file" name="myFile1" id="myFile1" class="inputfile inputfile-3" accept="*/*" >
                                            <label for="myFile1">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="iborrainputfile" width="30" height="27" viewBox="0 0 20 17">
                                                    <path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"></path>
                                                </svg>
                                                <span class="iborrainputfile lbl_evidencia">Seleccionar archivo</span>
                                            </label>
                                            <br>
                                            <input class="btn btn-warning btn-evidencia" type="submit" name="submit" id="myButton" ng-click="subirEvidencias()">
                                        </form>
                                    </div>
                            </div>
                            <div class="row" ng-if="versionSystem == 2">
                                <table class="table table-bordered">
                                    <thead>
                                        <th>Documento</th>
                                        <th>Tipo</th>
                                        <th>Descarga</th>
                                    </thead>
                                    <tbody ng-repeat="evidencia in detalleEvidencias">
                                        <tr>
                                            <td>{{evidencia.nombreEvidencia}}</td>
                                            <td>{{evidencia.tipo}}</td>
                                            <td>
                                                <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 " tooltip="Ver Documento" ng-click="openCatEvidencia(evidencia.ruta)">
                                                <i class="fa fa-file-o" style="font-size: 36px;"></i>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-1 col-lg-1">
                        </div>
                        <!-- Documentos por orden -->
                        <div class="col-sm-12 col-md-6 col-lg-6">
                            <h3>Documentación de la Orden</h3>
                            <div class="row" ng-if="versionSystem == 1">
                                <div class="m-t-xl">
                                    <div class="col-sm-4 col-md-4 col-lg-4 text-center">
                                        <label>Recepción</label>
                                        <br>
                                        <div ng-show="validaCertificado == 1">
                                            <div class="row">
                                                <object style="width: 100%; height: 100%" data="{{urlRecepcion}}" type="application/pdf">
                                                    <!-- <embed src="{{urlRecepcion}}" type="application/pdf" /> -->
                                                </object>
                                            </div>
                                            <br>
                                            <div class="row">
                                                <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 " tooltip="Ver Documento" ng-click="archivoEvidencia(1)">
                                                    <i class="fa fa-file-pdf-o" style="font-size: 36px;"></i>
                                                </div>
                                                <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10" style="text-align: left;">
                                                    <p style="margin: 0px;"><i class="fa fa-user" aria-hidden="true"></i> {{userRecepcion}}</p>
                                                    <strong class="fechaTimeLine">{{fechaRecepcion | date:"MM/dd/yyyy h:mma" : 'UTC' }}</strong>
                                                    <!-- <p class="fechaTimeLine"><strong>{{fechaRecepcion | date:"MM/dd/yyyy h:mma" }}</strong></p> -->
                                                </div>
                                            </div>
                                        </div>
                                        <button ng-show="validaCertificado == 0" class="btn btn-archivo btn-large-dim btn-outline m-t-md" type="button" ng-disabled="true"><!-- ng-click="archivoEvidencia(1);" ng-disabled="validaCertificado == 0" -->
                                            <i class="fa fa-file-pdf-o"></i>
                                        </button>
                                    </div>
                                    <div class="col-sm-4 col-md-4 col-lg-4 text-center">
                                        <label>Hoja Trabajo</label>
                                        <br>
                                        <div ng-show="detalleOrden.idEstatusOrden >= 6">
                                            <div class="row">
                                                <object style="width: 100%; height: 100%" data="{{urlTrabajo}}" type="application/pdf">
                                                  <!-- <param name="view" value="FitH,300"> -->
                                                  <!-- <embed src="{{urlTrabajo}}" type="application/pdf" /> -->
                                              </object>
                                            </div>
                                            <br>
                                            <div class="row">
                                                <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 " tooltip="Ver Documento" ng-click="OpenTrabajo();">
                                                    <i class="fa fa-file-pdf-o" style="font-size: 36px;"></i>
                                                </div>
                                                <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10" style="text-align: left;">
                                                    <p style="margin: 0px;"><i class="fa fa-user" aria-hidden="true"></i> {{userTermino}}</p>
                                                    <strong class="fechaTimeLine">{{fechaTermino | date:"MM/dd/yyyy h:mma" : 'UTC' }}</strong>
                                                    <!-- <p class="fechaTimeLine"><strong>{{fechaTermino | date:"MM/dd/yyyy h:mma" }}</strong></p> -->
                                                </div>
                                            </div>
                                            <br>
                                            <div class="row" ng-show="showApruebaTermino">
                                                <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 " tooltip="Ver Documento" ng-click="OpenTrabajo();">
                                                    <i class="fa fa-file-pdf-o" style="font-size: 36px;"></i>
                                                </div>
                                                <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10" style="text-align: left;">
                                                    <p style="margin: 0px;"><i class="fa fa-user" aria-hidden="true"></i> {{userApruebaTermino}}</p>
                                                    <strong class="fechaTimeLine">{{userFechaApruebaTermino | date:"MM/dd/yyyy h:mma" : 'UTC'}}</strong>
                                                    <!-- <p class="fechaTimeLine"><strong>{{userFechaApruebaTermino | date:"MM/dd/yyyy h:mma" }}</strong></p> -->
                                                </div>
                                            </div>
                                            <button ng-show="((userData.idUsuario == 155 || userData.idUsuario == 513 || userData.idUsuario == 510 || userData.idUsuario == 509 || userData.idUsuario == 570) && detalleOrden.idEstatusOrden >= 6)" class="btn btn-primary pull-right btn-movil" data-loading-text="Loading..." type="submit" ng-click="certificado()">
                                                <span class="glyphicon glyphicon-share-alt"></span> Regenerar Hoja Trabajo
                                            </button>
                                        </div>
                                        <button ng-show="detalleOrden.idEstatusOrden < 6" class="btn btn-archivo btn-large-dim btn-outline m-t-md" type="button" ng-click="OpenTrabajo();" ng-disabled="detalleOrden.idEstatusOrden < 6" ng-class="{btn_archivo_yep: detalleOrden.idEstatusOrden >= 6 }">
                                            <i class="fa fa-file-pdf-o"></i>
                                        </button>
                                    </div>
                                    <div class="col-sm-4 col-md-4 col-lg-4 text-center">
                                        <label>Factura</label>
                                        <br>
                                        <button class="btn btn-archivo  btn-large-dim btn-outline m-t-md" type="button" disabled="disabled">
                                            <!-- ng-disabled="totalfacturas == 0" ng-class="{btn_archivo_yep: totalfacturas != 0}" ng-click="OpenModalShowFactura()" -->
                                            <i class="fa fa-file-pdf-o"></i>
                                        </button>
                                    </div>
                                    <div class="col-sm-3 col-md-3 col-lg-3 text-center" ng-show="false">
                                        <label>Orden de Pago</label>
                                        <br>
                                        <button class="btn btn-archivo  btn-large-dim btn-outline m-t-md" type="button" ng-disabled="true">
                                            <i class="fa fa-file-pdf-o"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="row" ng-if="versionSystem == 2">
                                    <table class="table table-bordered">
                                        <thead>
                                            <th>Documento</th>
                                            <th>Usuario</th>
                                            <th>Fecha</th>
                                            <th>Descarga</th>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Recepción</td>
                                                <td><div ng-show="validaCertificado == 1">{{userRecepcion}}</div></td>
                                                <td><div ng-show="validaCertificado == 1">{{fechaRecepcion | date:"MM/dd/yyyy h:mma" : 'UTC' }}</div></td>
                                                <td>
                                                    <div ng-show="validaCertificado == 1" class="col-xs-2 col-sm-2 col-md-2 col-lg-2 " tooltip="Ver Documento" ng-click="archivoEvidencia(1)">
                                                    <i class="fa fa-file-pdf-o" style="font-size: 36px;"></i>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Hoja de Trabajo</td>
                                                <td><div ng-show="detalleOrden.idEstatusOrden >= 6">{{userTermino}} - {{userApruebaTermino}}</div></td>
                                                <td><div ng-show="detalleOrden.idEstatusOrden >= 6">{{fechaTermino | date:"MM/dd/yyyy h:mma" : 'UTC' }} - {{userFechaApruebaTermino | date:"MM/dd/yyyy h:mma" : 'UTC'}}</div></td>
                                                <td>
                                                    <div ng-show="detalleOrden.idEstatusOrden >= 6" class="col-xs-2 col-sm-2 col-md-2 col-lg-2 " tooltip="Ver Documento" ng-click="OpenTrabajo()">
                                                    <i class="fa fa-file-pdf-o" style="font-size: 36px;"></i>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Factura</td>
                                                <td></td>
                                                <td></td>
                                                <td>
                                                    <div ng-hide="true" class="col-xs-2 col-sm-2 col-md-2 col-lg-2 " tooltip="Ver Documento">
                                                    <i class="fa fa-file-pdf-o" style="font-size: 36px;"></i>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <div class="hr-line-dashed"></div>
                        </div>
                        <!-- PREORDEN -->
                        <div class="pull-right">
                            <button type="submit" class="btn btn-primary btn-subir" ng-click="irpreordenCotizacion(preorden.idCotizacion);" ng-show="((userData.idRol == 4 || userData.idRol == 3 || userData.idRol == 2) && preorden.hasPart == 1) && Precancelacion== false">
                                <span class="{{class_buttonCargaFactura}}"></span> Crear cotizaciones desde pre - orden
                            </button>
                        </div>
                        <!--Costos totales de las  cotizaciones-->
                        <div class="col-xs-4 col-md-4 col-sm-4 col-lg-4" ng-show="(estatus==4 || estatus == 5)&& userData.presupuesto == 1 && (rolLogged == 2)">
                            <div>
                                <h3>Presupuesto</h3>
                                <p>
                                    <label>Centro de Trabajo: </label>
                                    <span>{{centroTrabajo}}</span>
                                </p>
                                <p>
                                    <label>Presupuesto: </label>
                                    <span ng-class="(totalSumaVenta) > (saldos.saldo) ?  'sinPresupuesto' : ''">{{saldos.presupuesto | currency:"$": 2}}</span>
                                </p>
                                <p>
                                    <label>Saldo Disponible: </label>
                                    <span ng-class="(totalSumaVenta) > (saldos.saldo) ?  'sinPresupuesto' : ''">{{saldos.saldo| currency:"$": 2}}</span>
                                </p>
                                <!-- <p>
                                    <label>Saldo Real: </label>
                                    <span ng-class="(totalSumaVenta * 1.16) > (saldos.presupuesto-saldos.saldoReal) ? 'sinPresupuesto' : ''">{{saldos.presupuesto-saldos.saldoReal| currency:"$": 2}}</span>
                                    </p> -->
                            </div>
                        </div>
                        <div class="col-xs-4 col-md-4 col-sm-4 col-lg-4" ng-show="userData.manejoUtilidad == 1">
                            <div ng-show="userData.idRol == 2 || userData.idRol == 3">
                                <!--h3>Utilidad</h3-->
                                <p>
                                    <label>Utilidad Minima de la Operación: </label>
                                    <span>{{userData.porcentajeUtilidad | number: 2}} %</span>
                                </p>
                                <p>
                                    <label>Utilidad de la Orden: </label>
                                    <span ng-class="((totalSumaVenta - totalSumaCosto)*100)/ totalSumaVenta <= (userData.porcentajeUtilidad) ?  'sinPresupuesto' : ''">{{((totalSumaVenta - totalSumaCosto)*100)/ totalSumaVenta | dropDigitsFilter}}%</span>
                                </p>
                                <p>
                                    <label>Monto de la Utilidad: </label>
                                    <span>{{totalSumaVenta - totalSumaCosto | currency:"$": 2}}</span>
                                </p>
                            </div>
                        </div>

                        <div class="col-xs-4 col-md-4 col-sm-4 col-lg-4">
                            <div ng-show="orden.IdTipoOrden = 2">
                                <table class="table invoice-total">
                                    <tbody>
                                        <tr>
                                            <td><strong>SUBTOTAL :</strong></td>
                                            <td>{{btnSwitch.showCostoVenta == true ? totalSumaCosto : totalSumaVenta | dropDigitsFilter:'$'}}</td>
                                        </tr>
                                        <tr>
                                            <td><strong>I.V.A :</strong></td>
                                            <td>{{btnSwitch.showCostoVenta == true ? totalSumaCosto * 0.16 : totalSumaVenta * 0.16 | dropDigitsFilter: '$'}}</td>
                                        </tr>
                                        <tr>
                                            <td><strong>TOTAL :</strong></td>
                                            <td>{{btnSwitch.showCostoVenta == true ? totalSumaCosto * 1.16 : totalSumaVenta * 1.16 | dropDigitsFilter: '$'}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <!--Ordenes en Aprobación-->
                        <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12 smallerFont panelCotizaciones">
                            <!--Cotizaciones Grua-->
                            <div class="row" ng-show="(orden.IdTipoOrden == 2 || orden.IdTipoOrden == 1)" ng-repeat="cotizacion in cotizaciones">
                                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                    <div class="panel panel-default">
                                        <div class="panel-body">
                                            <div class="pestania">
                                                <h3>{{ cotizacion.numeroCotizacion }}</h3>
                                            </div>
                                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"></div>
                                            <div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
                                                <h4 ng-hide="cotizacion.idTaller[0] == 0">Detalle de la Cotización</h4>
                                                <h4 ng-show="cotizacion.idTaller[0] == 0">Detalle de la Pre Orden</h4>
                                                <address>
                                                    <strong>Estatus: </strong>
                                                    <span class="label label-success mayusculas">{{cotizacion.nombreEstatusCotizacion}} </span>
                                                    <br>
                                                    <br><strong>Usuario Creador: </strong> <span>{{cotizacion.nombreCompleto}}</span>
                                                    <br><strong>Fecha de Creación: </strong> <span>{{cotizacion.fechaCotizacion | date:"dd/MM/yyyy"}}</span>
                                                </address>
                                            </div>
                                            <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2"></div>
                                            <div class="col-xs-12 col-sm-5 col-md-5 col-lg-5" ng-hide="cotizacion.idTaller[0] == 0">
                                                <h4>Detalle de Proveedor</h4>
                                                <address>
                                                    <strong>Taller: </strong><span>{{cotizacion.razonSocial}}</span>
                                                    <br><strong>Dirección: </strong> <span>{{cotizacion.direccion}}</span>
                                                </address>
                                            </div>
                                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                                <div class="btn-group pull-right" ng-hide="hideSwitchBtn">
                                                    <button type="button" ng-class="btnSwitch.classCosto" ng-click="btnSwitch.showCostoVenta=true;
                                                        btnSwitch.classVenta='btn btn-default';
                                                        btnSwitch.classCosto='btn btn-success'">Costo</button>
                                                    <button type="button" ng-class="btnSwitch.classVenta" ng-click="btnSwitch.showCostoVenta=false;
                                                        btnSwitch.classVenta='btn btn-success';
                                                        btnSwitch.classCosto='btn btn-default'">Venta</button>
                                                </div>
                                                <button class="btn btn-primary pull-right cargar-factura" ng-show="cotizacion.showCargarFactura" ng-click="OpenModalFactura( cotizacion.idOrden,cotizacion.consecutivoCotizacion,cotizacion.sumaCosto,cotizacion.numeroCotizacion );">
                                                    Cargar Factura {{ }}
                                                </button>
                                                <!-- <button class="btn btn-success pull-right cargar-factura" ng-show="estatus == 5 && cotizacion.factura != 0">
                                                    Factura Cargada
                                                    </button> -->
                                                <span class="label label-primary pull-right cargar-factura labelFacturaCargada" ng-show="cotizacion.showFacturaCargada && userData.idRol != 1" ng-click="OpenModalShowFactura(cotizacion.numeroCotizacion)" data-toggle="tooltip" data-placement="bottom" title="Ver facturas de la cotización {{cotizacion.numeroCotizacion}}">
                                                FACTURA CARGADA
                                                </span>
                                            </div>
                                            <br>
                                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-show="cotizacion.detalle.length > 0">
                                                <div class="table-responsive m-t">
                                                    <table class="table invoice-table">
                                                        <thead>
                                                            <tr>
                                                                <th>Item</th>
                                                                <th class="slimCol">Cantidad</th>
                                                                <th class="slimCol" ng-show="btnSwitch.showCostoVenta">Costo Unitario</th>
                                                                <th class="slimCol" ng-show="btnSwitch.showCostoVenta">Costo</th>
                                                                <th class="slimCol" ng-hide="btnSwitch.showCostoVenta">Venta Unitario</th>
                                                                <th class="slimCol" ng-hide="btnSwitch.showCostoVenta">Venta</th>
                                                                <th class="slimCol" ng-show="(userData.idUsuario == 155 || userData.idUsuario == 156 || userData.idUsuario == 166) && estadoCompra == false">
                                                                    Modificar</th>
                                                                <th class="slimCol" ng-show="estatus == 5 || estatus == 6 || estatus == 7 || estatus == 8">Usuario Aprobador</th>
                                                                <th class="slimCol" ng-show="estatus == 5 || estatus == 6 || estatus == 7 || estatus == 8">Fecha Aprobación</th>
                                                                <th class="slimCol" ng-show="estatus == 4">Aprobar</th>
                                                                <th class="slimCol" ng-show="estatus == 4">Rechazar</th>
                                                                <th class="slimCol" ng-show="false">&nbsp;</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="partida in cotizacion.detalle" ng-init="partida.rowColor='info'; setRowColor(partida)" class="{{partida.idEstatusPartida == 3 ? 'rowCanceled' : partida.rowColor}}">
                                                                <td class="tdDesc">
                                                                    <div><strong>{{partida.partida}}</strong> / Parte <strong> {{partida.noParte}} </strong> / <span class="lblEsp label label-default">{{partida.especialidad}}</span>
                                                                    </div>
                                                                    <small>{{partida.descripcion}}</small>
                                                                    <a class="fotoPartida client-avatar" data-lightbox="image-1" data-title="Foto" href="{{ partida.foto != '' ? urldocs + '/partidas/' + partida.foto : '' }}"> <img src="{{ partida.foto != '' ? urldocs + '/partidas/' + partida.foto : '' }}" alt="foto" ng-hide="{{partida.foto=='' || partida.foto == undefined}}"> </a>
                                                                    <a class="instPartida client-avatar" ng-click="openPDF( partida.instructivo != '' ? urldocs + '/partidas/' + partida.instructivo : '' );"> <img src="../image/resources/file.png" alt="foto" ng-hide="{{partida.instructivo=='' || partida.instructivo == undefined}}"> </a>

                                                                </td>
                                                                <td class="slimCol">{{partida.cantidad}}</td>
                                                                <td class="slimCol" ng-show="btnSwitch.showCostoVenta" class="text-right">{{partida.costo | currency}}</td>
                                                                <td class="slimCol" ng-show="btnSwitch.showCostoVenta" class="text-right">{{partida.costoTotal | currency}}</td>
                                                                <td class="slimCol" ng-hide="btnSwitch.showCostoVenta" class="text-right">{{partida.venta | currency}}</td>
                                                                <td class="slimCol" ng-hide="btnSwitch.showCostoVenta" class="text-right">{{partida.ventaTotal | currency}}</td>
                                                                <td class="slimCol" style="text-align: center" ng-show="(userData.idUsuario == 155 || userData.idUsuario == 156  || userData.idUsuario == 166) && estadoCompra == false">
                                                                    <a href="">
                                                                        <span class="glyphicon glyphicon-edit fa-2x center" ng-click="prb1(partida)"></span>
                                                                    </a>

                                                                </td>
                                                                <td class="slimCol" ng-show="estatus == 5 || estatus == 6 || estatus == 7 || estatus == 8">{{partida.usuario}}</td>
                                                                <td class="slimCol" ng-show="estatus == 5 || estatus == 6 || estatus == 7 || estatus == 8">{{partida.fechaAprobacion | date:'dd-MM-yyyy HH:mm' : 'UTC' }}
                                                                </td>
                                                                <td class="slimCol" ng-show="estatus == 4">
                                                                    <div class="col-xs-offset-4 col-sm-offset-4 col-md-offset-4 col-lg-offset-4">
                                                                        <input type="radio" ng-init="partida.btnDisabled=true;
                                                                                partida.selOption=1;
                                                                                initApproveButtons(partida,cotizacion.idCotizacion);" ng-disabled="partida.btnDisabled" ng-model="partida.selOption" value="2" ng-click="verificaComentario(1,partida)">
                                                                    </div>
                                                                </td>
                                                                <td class="slimCol" ng-show="estatus == 4">
                                                                    <div class="col-xs-offset-4 col-sm-offset-4 col-md-offset-4 col-lg-offset-4">
                                                                        <input type="radio" ng-model="partida.selOption" ng-disabled="partida.btnDisabled" value="3" ng-click=agregarComentario(1,partida)>
                                                                    </div>
                                                                </td>
                                                                <td class="slimCol" ng-show="false" center>
                                                                    <input type="radio" ng-model="partida.selOption" ng-disabled="partida.btnDisabled" value="1">
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                        <tfoot>
                                                            <tr>
                                                                <td colspan="3">&nbsp;</td>
                                                                <td colspan="3" align="right" ng-hide="userData.idRol ==  4">
                                                                    <a href="#" class="btn btn-success btn-xs pull-right" ng-show="estatus == 4" ng-click="modal_aprobacion( cotizacion.idCotizacion, cotizacion.idEstatusCotizacion )">
                                                                        <i class="fa fa-key" aria-hidden="true"></i> Aprobación por Token
                                                                    </a>
                                                                </td>
                                                            </tr>
                                                        </tfoot>
                                                    </table>
                                                </div>
                                                <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
                                                    <div class="col-sm-12 col-md-6 col-lg-6" ng-show="comentarioCotizacion == 1">
                                                        <div class="panel panel-default">
                                                            <div class="panel-heading">
                                                                Comentarios por Cotización
                                                            </div>
                                                            <div class="panel-body">
                                                                <div class="col-sm-12 col-md-12 col-lg-12">
                                                                    <div class="my-scroll-nota">
                                                                        <div class="chat-activity-list">
                                                                            <div ng-repeat="notasC in notaComentario | filter:{ idCotizacion : cotizacion.idCotizacion }">
                                                                                <div class="chat-element">
                                                                                    <!-- <a href="#" ng-class="notasC.idUsuario===userData.idUsuario ? 'pull-left' : 'pull-right'">
                                                                                        <img alt="image" class="img-circle" src="image/profile/man2.jpg">
                                                                                    </a> -->
                                                                                    <i ng-click="accionComentario(notasC.idComentarioCotizacion, 1)" ng-class="notasC.idUsuario===userData.idUsuario ? 'pull-left' : 'pull-right'" class="mdi mdi-delete-variant mdi-24px"></i>
                                                                                    <i  ng-click="accionComentario(notasC.idComentarioCotizacion, 2)" ng-class="notasC.idUsuario===userData.idUsuario ? 'pull-left' : 'pull-right'" class="mdi mdi-lead-pencil mdi-24px"></i>
                                                                                    <i ng-show="editaComentario == 1" ng-click="actualizaComentario()" ng-class="notasC.idUsuario===userData.idUsuario ? 'pull-left' : 'pull-right'" class="mdi mdi-check-circle-outline mdi-24px"></i>
                                                                                    <i ng-show="editaComentario == 1" ng-click="cancelaProceso()" ng-class="notasC.idUsuario===userData.idUsuario ? 'pull-left' : 'pull-right'" class="mdi mdi-close-circle-outline mdi-24px"></i>
                                                                                    <div class="media-body">
                                                                                        <small ng-class="notasC.idUsuario===userData.idUsuario ? 'pull-right' : 'pull-left'">{{notasC.tiempoTranscurrido}}</small>
                                                                                        <div ng-class="notasC.idUsuario===userData.idUsuario ? 'pull-left' : 'pull-right'">
                                                                                            <strong>{{notasC.nombreCompleto}}</strong>
                                                                                            <p>{{notasC.nombreEstatus}}</p>
                                                                                            <p class="m-b-xs">
                                                                                                {{notasC.texto}}
                                                                                            </p>
                                                                                            <small class="text-muted">{{notasC.fecha |  date:'medium'}}</small>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="chat-form">
                                                                        <form role="form">
                                                                            <div class="form-group">
                                                                                <textarea class="form-control nota-input" placeholder="Escriba un comentario" ng-model="$parent.textoComentario" ng-hide="editaComentario == 1"></textarea>
                                                                                <textarea class="form-control nota-input" id="comment" placeholder="Modifica tu comentario" ng-show="editaComentario == 1" ng-model="comentarioNuevo.texto"></textarea>
                                                                            </div>
                                                                            <div class="text-right">
                                                                                <button type="submit" class="btn btn-sm btn-primary m-t-n-xs" ng-click="enviaComentario(cotizacion.idCotizacion)" ng-hide="editaComentario == 1">Publicar comentario</button>
                                                                                <button type="submit" class="btn btn-sm btn-primary m-t-n-xs" ng-click="actualizaComentario()" ng-show="editaComentario == 1">Modifica comentario</button>
                                                                            </div>
                                                                        </form>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-12 col-md-6 col-lg-6" ng-show="comentarioCotizacion == 0">
                                                    </div>
                                                    <div class="col-sm-12 col-md-6 col-lg-6">
                                                        <table class="table invoice-total">
                                                            <tbody>
                                                                <tr>
                                                                    <td><strong>SUBTOTAL :</strong></td>
                                                                    <td>{{ btnSwitch.showCostoVenta == true ? cotizacion.sumaCosto : cotizacion.sumaVenta | currency}}</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><strong>I.V.A :</strong></td>
                                                                    <td>{{ btnSwitch.showCostoVenta == true ? cotizacion.sumaCosto * 0.16 : cotizacion.sumaVenta * 0.16 | currency}}</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><strong>TOTAL :</strong></td>
                                                                    <td>{{ btnSwitch.showCostoVenta == true ? cotizacion.sumaCosto * 1.16 : cotizacion.sumaVenta * 1.16 | currency}}</td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                        <div>
                                                            <button class="btn btn-primary pull-right btn-movil" data-loading-text="Loading..." type="submit" ng-click="editarCotizacion(cotizacion)" ng-hide="cotizacion.idTaller[0] == 0 || (cotizacion.idEstatusCotizacion != 1 || cotizacion.hasApprovedParts == true)||Precancelacion">
                                                                <span class="{{class_buttonEditarCotizacion}}"></span> Editar Cotización
                                                            </button>
                                                            <button class="btn btn-danger pull-right btn-movil" data-loading-text="Loading..." type="submit" ng-click="cancelarAprobacion(cotizacion)" ng-hide="cotizacion.idTaller[0] == 0 || (cotizacion.idEstatusCotizacion != 1 && cotizacion.idEstatusCotizacion != 2)||Precancelacion">
                                                                <span></span> Cancelar Cotización
                                                            </button>
                                                            <button ng-hide="btnGuardaCotizacionIsEnable || userData.idRol == 3 || Precancelacion" data-loading-text="Loading..." type="submit" class="btn btn-success btn-movil pull-right " ng-click="btnSaveCotizacion( idUsuario, cotizacion)">
                                                                <span class="{{class_buttonGuardaCotizacion}}"></span> Guarda Cotización
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br>
                        <!-- Notas -->
                        <div class="col-sm-12 col-md-6 col-lg-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    Notas
                                </div>
                                <div class="panel-body">
                                    <div class="col-sm-12 col-md-12 col-lg-12">
                                        <div class="my-scroll-nota">
                                            <div class="chat-activity-list">
                                                <div ng-repeat="notas in notaTrabajo">
                                                    <div class="chat-element">
                                                        <a href="#" ng-class="notas.idUsuario===userData.idUsuario ? 'pull-left' : 'pull-right'">
                                                            <img alt="image" class="img-circle" src="image/profile/man2.jpg">
                                                        </a>
                                                        <div class="media-body">
                                                            <small ng-class="notas.idUsuario===userData.idUsuario ? 'pull-right' : 'pull-left'">{{notas.tiempoTranscurrido}}</small>
                                                            <div ng-class="notas.idUsuario===userData.idUsuario ? 'pull-left' : 'pull-right'">
                                                                <strong>{{notas.nombreCompleto}}</strong>
                                                                <p>{{notas.nombreEstatus}}</p>
                                                                <p class="m-b-xs">
                                                                    {{notas.texto}}
                                                                </p>
                                                                <small class="text-muted">{{notas.fecha |  date:'medium'}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="chat-form">
                                            <form role="form">
                                                <div class="form-group">
                                                    <textarea class="form-control nota-input" placeholder="Escriba una nota" ng-model="textoNota"></textarea>
                                                </div>
                                                <div class="text-right">
                                                    <button type="submit" class="btn btn-sm btn-primary m-t-n-xs" ng-click="enviaNota()">Enviar Nota</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Seccion es para los estatus de procesos, termino trabajo y entrega de la Orden -->
                        <div ng-show="userData.idUsuario == 509 || userData.idUsuario == 510  || userData.idUsuario == 166" class="col-xs-12 col-md-6">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        Soporte
                                    </div>
                                    <div class="panel-body">
                                        <div class="col-xs-12">
                                            <div class="row">
                                                <div class="col-xs-6">
                                                    <button class="btn btn-success" style="width: 100%" ng-click="reenviarHojaUtilidad()">Correo de Utilidad &nbsp;&nbsp;<span class="fa fa-paper-plane-o"></span></button>
                                                </div>
                                                <div class="col-xs-6">
                                                    <button class="btn btn-danger" ng-disabled="validaProcesoProvisionamiento != 2" style="width: 100%" ng-click="deleteProvision()">Eliminar Provisión &nbsp;&nbsp;<span class="fa fa-times"></span></button>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-6">
                                                    <button ng-disabled="idEstatusOrden < 6" class="btn btn-success" style="width: 100%" ng-click="regeneraCertificadoConf()">Regenerar Hoja de Trabajo &nbsp;&nbsp;<span class="fa fa-share"></span></button>
                                                </div>
                                                <div class="col-xs-6">
                                                    <button class="btn btn-danger" style="width: 100%" ng-click="cancelacionOrden()">Cancelar Orden &nbsp;&nbsp;<span class="fa fa-minus-circle"></span></button>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-6">
                                                    <button class="btn btn-info" ng-click="detalleCotizacionFactura();" style="width: 100%">Re-Carga Factura &nbsp;&nbsp;<span class="fa fa-upload"></span></button>
                                                </div>
                                                <div class="col-xs-6">
                                                    <button class="btn btn-danger" style="width: 100%" ng-click="cancelaCotizacion()">Cancelar Cotización &nbsp;&nbsp;<span class="fa fa-minus-circle"></span></button>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-6">
                                                    <button class="btn btn-info" style="width: 100%" ng-click="presupuestoOrden()">Mover Presupuesto &nbsp;&nbsp;<span class="fa fa-arrows-alt"></span></button>
                                                </div>
                                                <div class="col-xs-6">
                                                    <button ng-disabled="idEstatusOrden >= 8" class="btn btn-info" style="width: 100%" ng-click="avanzaOrden()">Avanza Orden &nbsp;&nbsp;<span class="fa fa-space-shuttle"></span></button>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-6">
                                                    <button class="btn btn-info" disabled style="width: 100%" ng-click="reenviarHojaUtilidad()">Integar Cotizaciones &nbsp;&nbsp;<span class="fa fa-puzzle-piece"></span></button>
                                                </div>   
                                                <div class="col-xs-6">
                                                    <button class="btn btn-info" disabled style="width: 100%" ng-click="reenviarHojaUtilidad()">Actualiza Taller/Costos &nbsp;&nbsp;<span class="fa fa-pencil-square-o"></span></button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<br>
<br>
<div class="controles-fixed">
    <div class="contenedor" ng-show="Precancelacion!=true">
        <div class="col-xs-4">
            <table class="table tbl-accion" ng-show="(userData.idRol == 2 || userData.idRol ==  3) && (idEstatusOrden != 13)">
                <tr>
                    <td class="header" width="120">
                        <label>Plan de Acción:</label>
                        <br>
                        <button class="btn btn-primary btn-xs" ng-click="OpenModalPlanAccion();">{{detalleOrden.hasAccion == 1 ? 'Editar Acción' : 'Agregar Acción'}}</button>
                    </td>
                    <td>
                        <p class="accion-detalle">{{detalleOrden.accion}}</p>
                        <p class="accion-detalle" ng-show="detalleOrden.hasAccion == 1">{{detalleOrden.fechaAccion | date:"MM/dd/yyyy h:mma"}}</p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="col-xs-1">
            <button ng-hide="aprovisonamiento == null" class="btn btn-info btn-movil" type="submit" ng-click="realizaProvision();"> Provisiona </button>
        </div>
        <div class="col-xs-7" id="footerDetalle">
            <div class="col-xs-12">
                <div class="tokenMargen" ng-show="show_tokenMargen">
                    <div class="token-group pull-right" role="group" aria-label="...">
                        <input type="text" ng-model="token_utilidad" placeholder="Token de Utilidad">
                        <button class="btn btn-primary pull-right btn-movil" type="button" ng-click="ValidaUtilidad();">
                            <i class="fa fa-spinner" aria-hidden="true"></i> Aceptar
                        </button>
                    </div>
                </div>
                <div class="btn-group pull-right botoneses3" role="group" style="margin-right: 10px; ">
                    <button ng-hide="btnMoradoIsEnable || userData.idRol ==  1" data-loading-text="Loading..." ng-disabled="detalleOrden.idEstatusOrden == 4" style="display: {{ detalleOrden.idEstatusOrden == 4 ? 'none' : 'block' }}" class="btn btn-morado btn-movil"
                        type="submit" ng-click="validateEstatusAprobacion()" ng-show="!show_tokenMargen">
                        <span class="{{class_buttonEnviaAprobacion}}"></span> Enviar a Aprobación
                    </button>
                    <button ng-hide="btnNegroIsEnable" class="btn btn-negro btn-movil" type="submit">Negro</button>
                    <button ng-hide="btnEditarCitaIsEnable || rolLogged == 1 || userData.idRol ==  4" data-loading-text="Loading..." ng-disabled="validaCertificado !=0" style="display: {{ validaCertificado !=0 ? 'none' : 'block' }}" class="btn btn-warning btn-movil" type="submit"
                        ng-click="editarCita()">
                        <span class="{{class_buttonEditarCita}}"></span> Editar Cita
                    </button>
                    <button ng-show="(estatus == 1 || estatus == 2) && (userData.idRol !=  4)" data-loading-text="Loading..." ng-disabled="validaCertificado !=0" style="display: {{ validaCertificado !=0 ? 'none' : 'block' }}" class="btn btn-danger btn-movil" type="submit"
                        ng-click="CancelarCita()">
                        <span class="{{class_buttonEditarCita}}"></span> Cancelar Cita
                    </button>

                    <button ng-show="(estatus == 1 || estatus == 2 || estatus == 3 || estatus == 4) && (userData.idUsuario ==  158)" data-loading-text="Loading..." class="btn btn-danger btn-movil" type="submit" ng-click="CancelOrder()">
                        <span class="{{class_buttonEditarCita}}"></span> Finalizar
                    </button>

                    <button ng-hide="btnComprobanteRecepcionIsEnable || estatus == 1 || userData.idRol == 1" data-loading-text="Loading..." ng-disabled="validaCertificado !=0" style="display: {{ validaCertificado !=0 ? 'none' : 'block' }}" class="btn btn-info btn-movil"
                        type="submit" ng-click="comprobante()">
                        <span class="{{class_buttonComprobanteRecepcion}}"></span> Comprobante de Recepción
                    </button>
                    <button data-loading-text="Loading..." class="btn btn-morado btn-movil" ng-click="enviaVerificacion()" ng-hide="detalleOrden.verificada">
                        <span class="{{class_buttonEnviaAprobacion}}"></span> Verificar Unidad
                    </button>
                    <button ng-hide="(userData.idRol == 1 || btnComprobanteRecepcionIsEnable || estatus == 1 ) &&   estatus != 4" data-loading-text="Loading..." class="btn btn-success btn-movil" type="submit" ng-click="nuevaCotizacion()">
                        <span class="{{class_buttonNuevaCotizacion}}"></span> Nueva Cotización
                    </button>
                    <button ng-hide="btnEditarIsEnable" class="btn btn-success btn-movil" type="submit"> Editar</button>
                </div>
            </div>
            <!-- / -->
            <!-- Seccion es para los estatus de procesos, termino trabajo y entrega de la Orden -->
            <div class="col-sm-12" ng-show="idEstatusOrden==5" ;>
                <div class="btn-group pull-right" role="group" aria-label="...">
                    <!--PROCESA COMPRA-->
                    <button class="btn btn-info btn-movil" type="button" ng-click="validaFacturaCotizacion()" ng-show="(userData.idRol == 2 || userData.idRol ==  3) && (botonProcesarCompra)">
                        Procesar compra
                    </button>
                    <!--VALIDAR USUARIO PARA PROVISIONES-->
                    <!--<button class="btn btn-inf btn-movil" type="button"  ng-click="aprobarProvision(provision)" ng-show="userData.idRol == 2" >
                    Aprobación Provisión
                    </button> -->
                    <button ng-hide="(userData.idRol == 1  || saldos.saldo < totalSumaCosto)" data-loading-text="Loading..." class="btn btn-success btn-movil" type="submit" ng-click="nuevaCotizacion();">
                        <span class="{{class_buttonNuevaCotizacion}}"></span> Nueva Cotización
                    </button>
                    <button class="btn btn-primary btn-movil " ng-hide="userData.idRol == 1" data-loading-text="Loading..." type="button" ng-click="ValidaTerminoTrabajo();">
                        <span class="{{class_buttonTerminaTrabajo}}"></span> Terminar Trabajo
                    </button>
                </div>
            </div>
            <!-- / -->
            <!-- Seccion para el token de administrador -->
            <div class="" ng-show="idEstatusOrden==6">
                <div class="col-xs-12">
                    <!--PROCESA COMPRA-->
                    <button class="btn btn-info btn-movil" type="button" ng-click="validaFacturaCotizacion()" ng-show="(userData.idRol == 2 || userData.idRol ==  3) && (botonProcesarCompra)">
                        Procesar compra
                    </button>
                    <div ng-hide="userData.idRol ==  4" class="token-group pull-right" role="group" aria-label="...">
                    <input type="text" ng-model="token_termino" placeholder="Token de Administrador" ng-show="idContratoOperacion!=3">
                    <input type="text" ng-model="token_termino" placeholder="Token de ASE" ng-show="idContratoOperacion == 3">
                    <button class="btn btn-primary pull-right btn-movil" type="button" ng-click="ValidaEntrega(0);">Aceptar</button>
                    </div>
                    <div class="btn-group pull-right" role="group" style="margin-right: 10px; ">
                        <!--VALIDAR USUARIO PARA PROVISIONES-->
                        <!-- <button class="btn btn-success pull-right btn-movil" type="button" ng-click="aprobarProvision(provision)" ng-show="userData.idRol == 2">
                            Aprobación Provisión
                        </button> -->
                    </div>
                </div>
            </div>
            <!-- / -->
            <!-- Seccion para el token de cliente -->
            <div ng-show="idEstatusOrden==7">
                <div class="col-xs-12">
                    <!--PROCESA COMPRA-->
                    <button class="btn btn-info btn-movil" type="button" ng-click="validaFacturaCotizacion()" ng-show="(userData.idRol == 2 || userData.idRol ==  3) && (botonProcesarCompra)">
                        Procesar compra
                    </button>
                    <div>
                    <div ng-show="idContratoOperacion==3" class="btn-group pull-right" data-toggle="tooltip" title="{{estatusTokenMensaje}}">
                        <div ng-show="estatusToken == 2">
                                <span style="font-size:34px; color:#006600; margin-right:5px;" class="fa fa-unlock-alt"></span>
                                <span style="font-size:34px; color:#006600;" class="fa fa-unlock-alt"></span>
                        </div>
                        <div ng-show="estatusToken == 1">
                                <span style="font-size:34px; margin-right:5px; color:#006600;" class="fa fa-unlock-alt"></span>
                                <span style="color: #e60000; font-size:34px;" class="fa fa-lock" ng-click="apptoken()"></span>
                        </div>
                        <div ng-show="estatusToken == 0">
                                <span style="color: #e60000; font-size:34px; margin-right:5px;" class="fa fa-lock" ng-click="apptoken()"></span>
                                <span style="color: #e60000; font-size:34px;" class="text-danger fa fa-lock" ng-click="apptoken()"></span>
                        </div>
                    </div>
                    <div ng-show="idContratoOperacion==3">
                            <div style="margin-right: 5px; " class="token-group pull-right" role="group" aria-label="...">
                            <input type="text" ng-model="token_termino" placeholder="Token de PEMEX">
                                    <button class="btn btn-primary pull-right btn-movil" type="button" ng-click="ValidaEntrega(1);">Aceptar</button>
                                </div>
                    </div>
                    </div>
                    <div ng-show="idContratoOperacion!=3">
                    <div style="margin-right: 5px; " class="token-group pull-right" role="group" aria-label="...">
                            <input type="text" ng-model="token_termino" placeholder="Token de Cliente">
                            <button class="btn btn-primary pull-right btn-movil" type="button" ng-click="ValidaEntrega(1);">Aceptar</button>
                        </div>
                        </div>
                    <div class="btn-group pull-right" role="group" style="margin-right: 10px; ">
                        <!--VALIDAR USUARIO PARA PROVISIONES-->
                        <!-- <button class="btn btn-success btn-movil" type="button" ng-click="aprobarProvision(provision)" ng-show="userData.idRol == 2">
                            Aprobación Provisión
                        </button> -->
                        <button ng-hide="estadoCompra == true || userData.idRol ==  4" class="btn btn-danger" type="button" ng-click="RechazarTrabajo();">
                            Rechazar Trabajo
                        </button>
                    </div>
                </div>
            </div>
            <!-- / -->
            <div ng-show="idEstatusOrden==8">
                <div class="col-xs-12">
                    <!--PROCESA COMPRA-->
                    <button class="btn btn-info btn-movil" type="button" ng-click="validaFacturaCotizacion()" ng-show="(userData.idRol == 2 || userData.idRol ==  3) && (botonProcesarCompra)">
                        Procesar compra
                    </button>
                    <div data-toggle="tooltip" title="{{estatusTokenMensaje}}">
                    <div ng-show="idContratoOperacion==3 && estatusToken == 0 && (userData.idRol ==  1 || userData.idRol ==  2 || userData.idRol ==  3)" class="btn-group pull-right" data-toggle="tooltip" title="{{estatusTokenMensaje}}">
                            <div>
                                    <span style="font-size:34px; color:#006600; margin-right:5px;" class=" fa fa-unlock-alt"></span>
                                    <span style="font-size:34px; color:#006600;" class=" fa fa-unlock-altfa fa-lock" ng-click="apptoken()"></span>
                            </div>
                        </div>
                    <div ng-show="idContratoOperacion==3 && estatusToken == 1 && (userData.idRol ==  1 || userData.idRol ==  2 || userData.idRol ==  3)" class="btn-group pull-right" data-toggle="tooltip" title="{{estatusTokenMensaje}}">
                            <div>
                                    <span style="font-size:34px; color:#006600; margin-right:5px;" class=" fa fa-unlock-alt"></span>
                                    <span style="color: #e60000; font-size:34px;" class="fa fa-lock" ng-click="apptoken()"></span>
                            </div>
                        </div>
                        </div>
                        <div ng-show="idContratoOperacion==3 && estatusToken == 1 && (userData.idRol ==  1 || userData.idRol ==  2 || userData.idRol ==  3)">
                            <div style="margin-right: 5px; " class="token-group pull-right" role="group" aria-label="...">
                                <input type="text" ng-model="token_termino" placeholder="Token de Cliente">
                                <button class="btn btn-primary pull-right btn-movil" type="button" ng-click="ValidaEntrega(8);">Aceptar</button>
                            </div>
                        </div>
                </div>
            </div>
            <!-- / -->
        </div>
    </div>
</div>
<!-- Modal cargando-->
<div id="loadModal" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="spiner-example" style="margin-top: 35%">
            <div class="sk-spinner sk-spinner-wandering-cubes">
                <div class="sk-cube1"></div>
                <div class="sk-cube2"></div>
            </div>
            <div style="color:white;margin-left: 46%; margin-top:20px">Cargando...</div>
        </div>
    </div>
</div>
<!-- Modal Mostrar -->
<div class="modal fade" id="ModalShowToken" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Token Aprobaciones</h4>
            </div>
            <div class="modal-body">
                <p>Introduzca el token proporcionado por el usuario quien autoriza.</p>
                <br>
                <label>Token</label>
                <input type="text" ng-model="token_aprobacion" class="token_admin form-control">
                <br>
                <div class="alert alert-warning err_aprobacion" style="display: none;">
                    <strong>¡Atención!</strong> {{ err_apronacion }}
                </div>
            </div>
            <div class="modal-footer consulta">
                <button class="btn btn-primary pull-right btn-movil aprobar_partidas" type="button" ng-click="VerificaTokenAprobacion();">
                    <i class="fa fa-spinner" aria-hidden="true"></i> Aprobar partidas
                </button>
                <style type="text/css">
                    .fa-spinner {
                        animation-name: rotate;
                        animation-duration: 1.5s;
                        animation-iteration-count: infinite;
                        animation-timing-function: linear;
                    }

                    @keyframes rotate {
                        from {
                            transform: rotate(0deg);
                        }
                        to {
                            transform: rotate(360deg);
                        }
                    }
                </style>
            </div>
        </div>
    </div>
</div>
<!-- Modal Mostrar -->
<div class="modal fade" id="ModalRechazoTrabajo" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Rechazar Trabajo</h4>
            </div>
            <div class="modal-body">
                <h4 class="center">¿Estas seguro?</h4>
                <br>
                <p class="center">Al rechazar el trabajo éste se cambiara a estatus 'En Proceso'.</p>
                <br>
                <label>Motivo</label>
                <input type="text" ng-model="motivo_rechazoTrabajo" class="token_admin form-control">
                <br>
            </div>
            <div class="modal-footer consulta">
                <button class="btn btn-danger pull-right btn-movil" type="button" ng-click="aceptarRechazoTrabajo();">
                    Rechazar
                </button>
            </div>
        </div>
    </div>
</div>
<!-- Modal Mostrar -->
<div class="modal fade" id="ModalShowFactura" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Facturas cargadas</h4>
            </div>
            <div class="modal-body">
                <div ng-show="facturas_empty">
                    <center>
                        <h1>Aún no se han cargado facturas</h1>
                    </center>
                </div>
                <div ng-show="!facturas_empty">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Cotización</th>
                                <th>PDF</th>
                                <th>XML</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="Fac in Facturas.data" ng-show="numCotizacionFactura == Fac.numeroCotizacion">
                                <td><b>{{Fac.numeroCotizacion}}</b></td>
                                <td>
                                    <a ng-show="Fac.facturas[0].tipo == 'pdf'" href="{{Fac.facturas[0].rutaDocumento}}" target="_blanc">
                                        <i class="fa fa-file-pdf-o fac_pdf"></i>
                                    </a>
                                    <a ng-show="Fac.facturas[1].tipo == 'pdf'" href="{{Fac.facturas[1].rutaDocumento}}" target="_blanc">
                                        <i class="fa fa-file-pdf-o fac_pdf"></i>
                                    </a>
                                </td>
                                <td>
                                    <a ng-show="Fac.facturas[0].tipo == 'xml'" href="{{Fac.facturas[0].rutaDocumento}}" target="_blanc" download="Reporte2Mayo2010">
                                        <i class="fa fa-file-code-o fac_xml"></i>
                                    </a>
                                    <a ng-show="Fac.facturas[1].tipo == 'xml'" href="{{Fac.facturas[1].rutaDocumento}}" target="_blanc" download="Reporte2Mayo2010">
                                        <i class="fa fa-file-code-o fac_xml"></i>
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                </div> -->
        </div>
    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <form id="frm_subir_factura" name="frm_subir_factura" method="post">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Carga de Factura</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="uploading" style="width: 100%; display: none;">
                            <center>
                                <img src="image/loading2.gif" width="250">
                            </center>
                        </div>
                        <div class="col-sm-12 archivos">
                            <input type="hidden" value="{{idOrden}}" name="idOrden">
                            <input type="hidden" value="{{cotizacionFactura}}" name="cotizacionFactura">
                            <input type="hidden" value="{{cotizacionTotal}}" name="cotizacionTotal">
                            <input type="hidden" value="{{numeroCotizacion}}" name="numeroCotizacion">
                            <input type="hidden" value="{{docServer}}" name="docServer">
                            <!-- $rootScope.docServer -->
                            <label>XML</label>
                            <br>
                            <input type="file" name="file_1" id="file_1" class="inputfile inputfile-1" accept="text/xml" />
                            <label for="file_1">
                                <svg xmlns="http://www.w3.org/2000/svg" class="iborrainputfile" width="30" height="27" viewBox="0 0 20 17">
                                    <path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"></path>
                                </svg>
                                <span class="iborrainputfile">Seleccionar archivo</span>
                            </label>
                            <br>
                            <br>
                            <label>PDF</label>
                            <br>
                            <input type="file" name="file_2" id="file_2" class="inputfile inputfile-2" accept="application/pdf" />
                            <label for="file_2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="iborrainputfile" width="30" height="27" viewBox="0 0 20 17">
                                    <path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"></path>
                                </svg>
                                <span class="iborrainputfile">Seleccionar archivo</span>
                            </label>
                            <!-- <label>XML</label> <input type="file" accept="text/xml" name="myFile1" id="myFile1"> -->
                            <!-- <br> -->
                            <!-- <label>PDF</label> <input type="file" name="myFile2" id="myFile2"> -->
                            <br>
                        </div>
                        <div class="col-sm-12">
                            <br>
                            <div class="alert alert-warning alert_respuesta">
                                <h3 id="mensaje"></h3>
                                <br>
                                <br>
                                <table class="table borderless errores_factura"> </table>
                            </div>
                            <div class="alert alert-info" style="display: none;">
                                <strong>¡Nota!</strong> <span></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default btn-cerrar" data-dismiss="modal">Cerrar</button>
                    <button type="submit" class="btn btn-primary btn-subir" ng-click="Cargar_Factura_Tmp();">
                        <span class="{{class_buttonCargaFactura}}"></span> Subir Factura
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- Modal Mostrar -->
<div class="modal fade" id="ModalPlanAccion" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Plan de Acción</h4>
            </div>
            <div class="modal-body">
                <!-- Acciones -->
                <!--12072017 agre FAL plan de acción -->
                <div class="row">
                    <div class="col-sm-3 col-md-3 col-lg-3">
                        <label>Plan de acción</label>
                    </div>
                    <div class="col-sm-9 col-md-9 col-lg-9">
                        <textarea name="message" placeholder="Escriba su plan de acción" style="width: 352px; height: 82px;" ng-model="comentaAccion" capitalize></textarea>
                    </div>
                    <div class="col-sm-3 col-md-3 col-lg-3 m-t">
                        <label>Fecha</label>
                    </div>
                    <div class="col-sm-5 col-md-5 col-lg-5 m-t">
                        <div class="input-group date">
                            <input type="text" class="form-control calendarControl" value="" ng-model="fechaAccion" ng-change="NoFechaAntigua(fechaAccion)" calendar>
                            <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="col-sm-3 col-md-3 col-lg-3 m-t">
                                <label>Hora</label>
                            </div>
                            <div class="col-sm-5 col-md-5 col-lg-5 m-t">
                                <div class="input-group horaAsignada" data-autoclose="true">
                                    <input type="text" class="form-control" value="" ng-model="horaAccion" ng-change="NoHoraAntigua(horaAccion)">
                                    <span class="input-group-addon">
                            <span class="fa fa-clock-o"></span>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-sm btn-primary pull-right" ng-click="acciones()">Agregar Acción</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal disponible -->
<div class="modal fade" id="Modal" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Plan de Acción</h4>
                </div>
                <div class="modal-body">
                    <!-- Acciones -->
                    <!--12072017 agre FAL plan de acción -->
                    <div class="row">
                        <div class="col-sm-3 col-md-3 col-lg-3">
                            <label>Plan de acción</label>
                        </div>
                        <div class="col-sm-9 col-md-9 col-lg-9">
                            <textarea name="message" placeholder="Escriba su plan de acción" style="width: 352px; height: 82px;" ng-model="comentaAccion" capitalize></textarea>
                        </div>
                        <div class="col-sm-3 col-md-3 col-lg-3 m-t">
                            <label>Fecha</label>
                        </div>
                        <div class="col-sm-5 col-md-5 col-lg-5 m-t">
                            <div class="input-group date">
                                <input type="text" class="form-control calendarControl" value="" ng-model="fechaAccion" ng-change="NoFechaAntigua(fechaAccion)" calendar>
                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="col-sm-3 col-md-3 col-lg-3 m-t">
                                    <label>Hora</label>
                                </div>
                                <div class="col-sm-5 col-md-5 col-lg-5 m-t">
                                    <div class="input-group horaAsignada" data-autoclose="true">
                                        <input type="text" class="form-control" value="" ng-model="horaAccion" ng-change="NoHoraAntigua(horaAccion)">
                                        <span class="input-group-addon">
                                <span class="fa fa-clock-o"></span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-sm btn-primary pull-right" ng-click="acciones()">Agregar Acción</button>
                </div>
            </div>
        </div>
    </div>

<div class="modal fade" id="editorDetalleCotizacion" tabindex="-1" role="dialog" aria-labelledby="editor-title">
    <style scoped>
        /* provides a red astrix to denote required fields - this should be included in common stylesheet */

        .form-group.required .control-label:after {
            content: "*";
            color: red;
            margin-left: 4px;
        }
    </style>
    <div class="modal-dialog" role="document">
        <form class="modal-content form-horizontal" id="editor">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                <h4 class="modal-title" id="editor-title">Cotizacion detalle</h4>

            </div>
            <div class="modal-body">
                <input type="number" id="id" name="id" class="hidden" />
                <div class="form-group" style="text-align: left">
                    <label for="firstName" class="col-sm-3 control-label">Número de parte</label>
                    <div class="col-sm-9">
                        <label class="control-label" id="numeroCotizacionDetalle" name="numeroCotizacionDetalle"><span>{{cotizacionDetalle.noParte}}</span></label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="lastName" class="col-sm-3 control-label">Número de partida</label>
                    <div class="col-sm-9">
                        <label class="control-label" id="numeroPartidaCotizacionDetalle" name="numeroPartidaCotizacionDetalle">{{cotizacionDetalle.partida}}</label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="jobTitle" class="col-sm-3 control-label">Cantidad</label>
                    <div class="col-sm-9">
                        <label class="control-label" id="cantidadCotizacionDetalle" name="cantidadCotizacionDetalle">{{cotizacionDetalle.cantidad}}</label>
                    </div>
                </div>
                <div class="form-group required">
                    <label for="startedOn" class="col-sm-3 control-label">Costo</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" id="costoCotizacionDetalle" name="costoCotizacionDetalle" placeholder="Costo" ng-model="cotizacionDetalle.costo" required>
                    </div>
                </div>
                <div class="form-group required">
                    <label for="dob" class="col-sm-3 control-label">Venta</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" id="ventaCotizacionDetalle" name="ventaCotizacionDetalle" placeholder="Venta" ng-model="cotizacionDetalle.venta">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-primary" ng-click="updateDetalleCotizacion()">Guardar cambios</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
            </div>
        </form>
    </div>
</div>

<div class="modal fade" id="ModalCotizaciones" role="dialog">
    <div class="modal-dialog modal-lg">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Modulo Cotizacion</h4>
            </div>
            <div class="modal-body">
                <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12 smallerFont panelCotizaciones">
                    <div class="row" ng-show="(orden.IdTipoOrden == 2 || orden.IdTipoOrden == 1)" ng-repeat="cotizacion in cotizaciones">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <div class="panel panel-default">
                                <div class="panel-body">
                                    <div class="pestania">
                                        <h3>{{ cotizacion.numeroCotizacion }}</h3>
                                    </div>
                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"></div>
                                    <div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
                                        <h4 ng-hide="cotizacion.idTaller[0] == 0">Detalle de la Cotización</h4>
                                        <h4 ng-show="cotizacion.idTaller[0] == 0">Detalle de la Pre Orden</h4>
                                        <address>
                                            <strong>Estatus: </strong>
                                            <span class="label label-success mayusculas">{{cotizacion.nombreEstatusCotizacion}} </span>
                                            <br>
                                            <br><strong>Usuario Creador: </strong> <span>{{cotizacion.nombreCompleto}}</span>
                                            <br><strong>Fecha de Creación: </strong> <span>{{cotizacion.fechaCotizacion | date:"dd/MM/yyyy"}}</span>
                                        </address>
                                    </div>
                                    <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2"></div>
                                    <div class="col-xs-12 col-sm-5 col-md-5 col-lg-5" ng-hide="cotizacion.idTaller[0] == 0">
                                        <h4>Detalle de Proveedor</h4>
                                        <address>
                                            <strong>Taller: </strong><span>{{cotizacion.razonSocial}}</span>
                                            <br><strong>Dirección: </strong> <span>{{cotizacion.direccion}}</span>
                                        </address>
                                    </div>
                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                        <div class="btn-group pull-right" ng-hide="hideSwitchBtn">
                                            <button type="button" ng-class="btnSwitch.classCosto" ng-click="btnSwitch.showCostoVenta=true;
                                                btnSwitch.classVenta='btn btn-default';
                                                btnSwitch.classCosto='btn btn-success'">Costo</button>
                                            <button type="button" ng-class="btnSwitch.classVenta" ng-click="btnSwitch.showCostoVenta=false;
                                                btnSwitch.classVenta='btn btn-success';
                                                btnSwitch.classCosto='btn btn-default'">Venta</button>
                                        </div>
                                        <button class="btn btn-primary pull-right cargar-factura" ng-click="OpenModalFacturaRecarga( cotizacion.idOrden,cotizacion.consecutivoCotizacion,cotizacion.sumaCosto,cotizacion.numeroCotizacion );">
                                            Cargar Factura
                                        </button>
                                        <!-- <span class="label label-primary pull-right cargar-factura labelFacturaCargada" ng-show="cotizacion.showFacturaCargada" ng-click="OpenModalShowFactura(cotizacion.numeroCotizacion)" data-toggle="tooltip" data-placement="bottom" title="Ver facturas de la cotización {{cotizacion.numeroCotizacion}}">
                                        FACTURA CARGADA
                                        </span> -->
                                    </div>
                                    <br>
                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-show="cotizacion.detalle.length > 0">
                                        <div class="table-responsive m-t">
                                            <table class="table invoice-table">
                                                <thead>
                                                    <tr>
                                                        <th>Item</th>
                                                        <th class="slimCol">Cantidad</th>
                                                        <th class="slimCol" ng-show="btnSwitch.showCostoVenta">Costo Unitario</th>
                                                        <th class="slimCol" ng-show="btnSwitch.showCostoVenta">Costo</th>
                                                        <th class="slimCol" ng-hide="btnSwitch.showCostoVenta">Venta Unitario</th>
                                                        <th class="slimCol" ng-hide="btnSwitch.showCostoVenta">Venta</th>
                                                        <th class="slimCol" ng-show="(userData.idUsuario == 155 || userData.idUsuario == 156) && estadoCompra == false">
                                                            Modificar</th>
                                                        <th class="slimCol" ng-show="estatus == 5 || estatus == 6 || estatus == 7 || estatus == 8">Usuario Aprobador</th>
                                                        <th class="slimCol" ng-show="estatus == 5 || estatus == 6 || estatus == 7 || estatus == 8">Fecha Aprobación</th>
<!--                                                         <th class="slimCol" ng-show="estatus == 4">Aprobar</th>
                                                        <th class="slimCol" ng-show="estatus == 4">Rechazar</th> 
                                                         <th class="slimCol" ng-show="false">&nbsp;</th> -->
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="partida in cotizacion.detalle" ng-init="partida.rowColor='info'; setRowColor(partida)" class="{{partida.idEstatusPartida == 3 ? 'rowCanceled' : partida.rowColor}}">
                                                        <td class="tdDesc">
                                                            <div><strong>{{partida.partida}}</strong> / Parte <strong> {{partida.noParte}} </strong> / <span class="lblEsp label label-default">{{partida.especialidad}}</span>
                                                            </div>
                                                            <small>{{partida.descripcion}}</small>
                                                            <a class="fotoPartida client-avatar" data-lightbox="image-1" data-title="Foto" href="{{ partida.foto != '' ? urldocs + '/partidas/' + partida.foto : '' }}"> <img src="{{ partida.foto != '' ? urldocs + '/partidas/' + partida.foto : '' }}" alt="foto"> </a>
                                                            <a class="instPartida client-avatar" ng-click="openPDF( partida.instructivo != '' ? urldocs + '/partidas/' + partida.instructivo : '' );"> <img src="../image/resources/file.png" alt="foto"> </a>

                                                        </td>
                                                        <td class="slimCol">{{partida.cantidad}}</td>
                                                        <td class="slimCol" ng-show="btnSwitch.showCostoVenta" class="text-right">{{partida.costo | currency}}</td>
                                                        <td class="slimCol" ng-show="btnSwitch.showCostoVenta" class="text-right">{{partida.costoTotal | currency}}</td>
                                                        <td class="slimCol" ng-hide="btnSwitch.showCostoVenta" class="text-right">{{partida.venta | currency}}</td>
                                                        <td class="slimCol" ng-hide="btnSwitch.showCostoVenta" class="text-right">{{partida.ventaTotal | currency}}</td>
                                                        <td class="slimCol" style="text-align: center" ng-show="(userData.idUsuario == 155 || userData.idUsuario == 156) && estadoCompra == false">
                                                            <a href="">
                                                                <span class="glyphicon glyphicon-edit fa-2x center" ng-click="prb1(partida)"></span>
                                                            </a>

                                                        </td>
                                                        <td class="slimCol" ng-show="estatus == 5 || estatus == 6 || estatus == 7 || estatus == 8">{{partida.usuario}}</td>
                                                        <td class="slimCol" ng-show="estatus == 5 || estatus == 6 || estatus == 7 || estatus == 8">{{partida.fechaAprobacion | date:'dd-MM-yyyy HH:mm' : 'UTC' }}
                                                        </td>
<!--                                                         <td class="slimCol" ng-show="estatus == 4">
                                                            <div class="col-xs-offset-4 col-sm-offset-4 col-md-offset-4 col-lg-offset-4">
                                                                <input type="radio" ng-init="partida.btnDisabled=true;
                                                                        partida.selOption=1;
                                                                        initApproveButtons(partida,cotizacion.idCotizacion);" ng-disabled="partida.btnDisabled" ng-model="partida.selOption" value="2" ng-click="verificaComentario(1,partida)">
                                                            </div>
                                                        </td>
                                                        <td class="slimCol" ng-show="estatus == 4">
                                                            <div class="col-xs-offset-4 col-sm-offset-4 col-md-offset-4 col-lg-offset-4">
                                                                <input type="radio" ng-model="partida.selOption" ng-disabled="partida.btnDisabled" value="3" ng-click=agregarComentario(1,partida)>
                                                            </div>
                                                        </td> 
                                                        <td class="slimCol" ng-show="false" center>
                                                            <input type="radio" ng-model="partida.selOption" ng-disabled="partida.btnDisabled" value="1">
                                                        </td> -->
                                                    </tr>
                                                </tbody>
<!--                                                 <tfoot>
                                                    <tr>
                                                        <td colspan="3">&nbsp;</td>
                                                        <td colspan="3" align="right" ng-hide="userData.idRol ==  4">
                                                            <a href="#" class="btn btn-success btn-xs pull-right" ng-show="estatus == 4" ng-click="modal_aprobacion( cotizacion.idCotizacion, cotizacion.idEstatusCotizacion )">
                                                                <i class="fa fa-key" aria-hidden="true"></i> Aprobación por Token
                                                            </a>
                                                        </td>
                                                    </tr>
                                                </tfoot> -->
                                            </table>
                                        </div>
                                        <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
                                            <table class="table invoice-total">
                                                <tbody>
                                                    <tr>
                                                        <td><strong>SUBTOTAL :</strong></td>
                                                        <td>{{ btnSwitch.showCostoVenta == true ? cotizacion.sumaCosto : cotizacion.sumaVenta | currency}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>I.V.A :</strong></td>
                                                        <td>{{ btnSwitch.showCostoVenta == true ? cotizacion.sumaCosto * 0.16 : cotizacion.sumaVenta * 0.16 | currency}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td><strong>TOTAL :</strong></td>
                                                        <td>{{ btnSwitch.showCostoVenta == true ? cotizacion.sumaCosto * 1.16 : cotizacion.sumaVenta * 1.16 | currency}}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <div>
<!--                                                 <button class="btn btn-primary pull-right btn-movil" data-loading-text="Loading..." type="submit" ng-click="editarCotizacion(cotizacion)" ng-hide="cotizacion.idTaller[0] == 0 || (cotizacion.idEstatusCotizacion != 1 || cotizacion.hasApprovedParts == true)||Precancelacion">
                                                    <span class="{{class_buttonEditarCotizacion}}"></span> Editar Cotización
                                                </button>
                                                <button class="btn btn-danger pull-right btn-movil" data-loading-text="Loading..." type="submit" ng-click="cancelarAprobacion(cotizacion)" ng-hide="cotizacion.idTaller[0] == 0 || (cotizacion.idEstatusCotizacion != 1 && cotizacion.idEstatusCotizacion != 2)||Precancelacion">
                                                    <span></span> Cancelar Cotización
                                                </button>
                                                <button ng-hide="btnGuardaCotizacionIsEnable || userData.idRol == 3 || Precancelacion" data-loading-text="Loading..." type="submit" class="btn btn-success btn-movil pull-right " ng-click="btnSaveCotizacion( idUsuario, cotizacion)">
                                                    <span class="{{class_buttonGuardaCotizacion}}"></span> Guarda Cotización
                                                </button> -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> 
            </div>
            <div class="consulta" style="padding: 15px;text-align: right;">
                <button type="button" class="btn btn-default" data-dismiss="modal">Salir</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="cencelCotizaciones" role="dialog">
    <div class="modal-dialog moda-sm">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Cancela Cotizaciones</h4>
            </div>
            <div class="modal-body">
                <div class="row col-md-12">
                    <div class="col-md-6">
                        <label class="font-noraml">Cotización</label>
                            <select class="form-control m-b" id="cotizaSoporte" ng-model="cotizaSoporte" 
                            ng-options="cotizaSoporte.idCotizacion as cotizaSoporte.numeroCotizacion for cotizaSoporte in cotizacionSoporte">
                                <option value="">Seleccione una Cotización</option>
                            </select>
                    </div>
                    <div class="col-md-1">
                    </div>
                    <div class="col-md-2">
                    <label class="font-noraml">Acción</label><br>
                        <button id="btnBuscar" busy="Buscando.." data-loading-text="Loading..." type="button" tooltip="Cancelación de Cotización" class="btn btn-success" ng-click="cancelacionCotizacion(cotizaSoporte)"><span class="{{class_buttonReclamacion}}"></span> Cancela Cotización </button>
                    </div>
                </div>
            </div>
            <div class="consulta" style="padding: 15px;text-align: right;">
                <button type="button" class="btn btn-default" data-dismiss="modal">Salir</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modalPresupuestoOrden" role="dialog">
    <div class="modal-dialog modal-lg">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Presupuesto Orden</h4>
            </div>
            <div class="modal-body">
            <div class="text-orden">Presupuesto Orden Actual</div>
            <br><br> <br><br>
                <div class="row col-md-12">
                    <table class="table table-striped table-bordered table-hover presupuestoOrdActiv" cg-busy="{promise:promise,message:message}">
                        <thead>
                            <th>Número Orden</th>
                            <th>Fecha Creación Orden</th>
                            <th>Comentario Orden</th>
                            <th>Zona</th>
                            <th>Presupuesto</th>
                            <th>Folio Presupuesto</th>
                            <th>Orden</th>
                            <th>Centro de Trabajo</th>
                        </thead>
                        <tbody>
                            <tr ng-repeat="presupuestoOrd in presupuestoOrdAct">
                                <td>{{presupuestoOrd.numeroOrden}}</td>
                                <td>{{presupuestoOrd.fechaCreacionOden | date:'dd/MM/yyyy hh:mm'}}</td>
                                <td>{{presupuestoOrd.comentarioOrden}}</td>
                                <td>{{presupuestoOrd.Padre}} - {{presupuestoOrd.Hijo}}</td>
                                <td>{{presupuestoOrd.presupuesto  | currency}}</td>
                                <td>{{presupuestoOrd.folioPresupuesto}}</td>
                                <td>{{presupuestoOrd.orden}}</td>
                                <td>{{presupuestoOrd.nombreCentroTrabajo}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="text-orden">Actulizar Presupuesto Orden {{numeroOrden}}</div>
                <br><br> <br><br>
                <div class="row col-md-12">
                    <table class="table table-striped table-bordered table-hover presupuestoCT" cg-busy="{promise:promise,message:message}">
                        <thead>
                            <th>Presupuesto</th>
                            <th>Folio Presupuesto</th>
                            <th>Orden</th>
                            <th>Centro de Trabajo</th>
                            <th>Seleccionar</th>
                        </thead>
                        <tbody>
                            <tr ng-repeat="pspto in presupuestoCNTB">
                                <td>{{pspto.presupuesto  | currency}}</td>
                                <td>{{pspto.folioPresupuesto}}</td>
                                <td>{{pspto.orden}}</td>
                                <td>{{pspto.nombreCentroTrabajo}}</td>
                                <td class="text-center">
                                    <div class="radio radio-info">
                                        <input type="radio" value="" name="opcionEstatus" ng-click="sendIdPresupuesto(pspto.idPresupuesto)">
                                        <label></label>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <br><br><br>
            </div>
            <div class="consulta" style="padding: 15px;text-align: right;">
                <button type="button" class="btn btn-default" data-dismiss="modal">Salir</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="validaContrasena" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog moda-sm">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
                <h4 class="modal-title">Bienvenido {{usernombreCompleto}}, por favor introduzca su contraseña</h4>
            </div>
            <div class="modal-body">
            <br><br>
                <label class="col-sm-3 control-label myModalTag">Contraseña de Cliente</label>
                <div class="col-sm-8">
                    <div class="m-b">
                        <div class="row">
                          <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10 inputDiv">
                            <input type="password" name="password" placeholder="Ingrese la contraseña de Cliente" ng-model="supuestaContrasena" id="myPassword" size="30" class="form-control"/>
                          </div>
                          <div class="col-xs-2 col-xs-2 col-md-2 col-lg-2 iconDiv">
                            <i class="fa fa-eye fa-2x myIcon" aria-hidden="true" ng-mouseover="mouseoverPass();" ng-mouseleave="mouseoutPass();"></i>
                         </div>
                       </div>
                    </div>
                    <br><br>
                </div>
            </div>
            <div class="consulta" style="padding: 15px;text-align: right;">
                <button type="submit" class="btn btn-primary" ng-click="checkContrasea()">Inicia Sesión</button>
                <button type="submit" class="btn btn-default" ng-click="checkContraseaEscape()">Salir</button>
                <!-- <button type="button" class="btn btn-default" data-dismiss="modal">Salir</button> -->
            </div>
        </div>
    </div>
</div>

<!--Inicio modales versionSystem 2-->
<div class="modal fade" id="muestraTipoUnidadVS2" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog moda-sm">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Caracteristicas del tipo unidad</h4>
            </div>
            <div class="modal-body">
                <br><br>
                <form id="idPadreMuestraTipoUnidadVS2">
                </form> 
                <div class="form-group">
                        <div class="consulta" style="padding: 15px;text-align: right;">
                            <button type="submit" class="btn btn-primary" ng-click="destruirMuestraTipoUnidadVS2()">Cerrar</button></div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--Fin modales versionSystem 2-->

<!-- <div class="modal fade" id="editComentario" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog moda-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Editar comentario</h4>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label for="comment">Comentario:</label>
                        <textarea class="form-control" rows="3" id="comment" ng-model=""></textarea>
                    </div>
                    <div class="consulta" style="padding: 3px;text-align: right;">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Salir</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div> -->


<script>
    $(document).ready(function() {
        $(window).scroll(function(event) {
            var scroll = $(window).scrollTop();
            if (scroll <= 60) {
                $(".controles-fixed").removeClass("entra");
            } else {
                $(".controles-fixed").addClass("entra");
            }
        });

        $('.scroll_content').slimscroll({
            //height: '580px',
            width: '100%'
        })
        setTimeout(function() {
            $('[data-toggle="popover"]').popover({
                html: true
            });
        }, 500);




        var inputs = document.querySelectorAll('.inputfile');
        Array.prototype.forEach.call(inputs, function(input) {
            var label = input.nextElementSibling,
                labelVal = label.innerHTML;

            input.addEventListener('change', function(e) {
                var fileName = '';
                if (this.files && this.files.length > 1)
                    fileName = (this.getAttribute('data-multiple-caption') || '').replace('{count}', this.files.length);
                else
                    fileName = e.target.value.split('\\').pop();

                if (fileName)
                    label.querySelector('span').innerHTML = fileName;
                else
                    label.innerHTML = labelVal;
            });
        });



    });

    var optFlag = true;
    var moreOptions = function() {
        if (optFlag) {
            $(".tokenMargen").fadeOut();
            setTimeout(function() {
                $(".botoneses3").fadeIn();
            }, 200);
            optFlag = false;

            $(".mas-options .fa-angle-down").hide();
            $(".mas-options .fa-angle-up").show();
            $(".mas-options small").text('Introducir Token');
        } else {
            $(".botoneses3").fadeOut();
            setTimeout(function() {
                $(".tokenMargen").fadeIn();
            }, 200);
            optFlag = true;

            $(".mas-options .fa-angle-down").show();
            $(".mas-options .fa-angle-up").hide();
            $(".mas-options small").text('Más Opciones');
        }

    }
</script>
