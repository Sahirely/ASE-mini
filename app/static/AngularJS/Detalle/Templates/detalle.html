<link rel="stylesheet" href="AngularJS/Detalle/Styles/detalle.css">
<div ng-init="init()" class="animated bounceInRight">
    <div class="headTitleTallerCita">
        <span class="title title-xs"> Consulta Unidad</span>
    </div>
    <div class="wrapper wrapper-content">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-content">
                        <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
                            <h3>Orden: <span class="text-orden"> {{numeroOrden}} </span></h3>
                            <h3>Tipo de Orden: <span class="text-orden">{{detalleOrden.nombreTipoOrden}} </span></h3>
                        </div>
                        <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
                            <h3><span class="label label-primary mayusculas">{{detalleOrden.nombreEstatusOrden}} </span></h3>
                            <!-- <button class="btn btn-primary pull-right"
                                ng-show="estatus == 5"
                                ng-click="getReporteConformidad(detalleOrden.idOrden)">
                                Test :: Generar Hoja de trabajo :: Orden ( {{detalleOrden.idOrden}} )
                                </button> -->
                        </div>
                        <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4" ng-class="{conTiempo: sinTiempoDisponible == 0, sinTiempo: sinTiempoDisponible == 1}" ng-show="userData.tiempoAsignado == 1">
                            <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8 TiempoTranscurrido">
                                {{tiempoTranscurridoDisplay}}
                            </div>
                            <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                <i class="fa fa-clock-o reloj"></i>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-12">
                            <div class="hr-line-dashed"></div>
                        </div>
                        <!--div class="row">
                            <div class="col-md-12">
                                
                                <div style="display:inline-block;width:90%;overflow-y:auto;">
                                    <ul class="timeline timeline-horizontal">
                                        <li class="timeline-item" ng-repeat='historico in HistoricoOrden'>
                                            <div class="timeline-badge primary"><i class="glyphicon glyphicon-check"></i></div>
                                            <div class="timeline-panel">
                                                <div class="timeline-heading">
                                                    <h4 class="timeline-title">{{historico.nombreEstatusOrden}}</h4>
                                                    <p><small class="text-muted"><i class="glyphicon glyphicon-time"></i> Fecha: {{historico.fecha | date:"dd/MM/yyyy" }}</small></p>
                                                </div>
                                                <div class="timeline-body">
                                                    <p class="glyphicon glyphicon-user">{{historico.nombreCompleto}}</p>
                                                </div>
                                            </div-->
                        <!--div class="timelnie-item">
                            <div class="row">
                                <div class="col-xs-3 date">
                                    <small class="text-navy">{{historico.fecha | date:"dd/MM/yyyy hh:mm"  }}</small>
                                </div>
                                <div class="col-xs-7 content no-top-border">
                                    <p class="m-b-xs"><strong>{{historico.nombreEstatusOrden}}</strong></p>
                                    <p class="glyphicon glyphicon-user">{{historico.nombreCompleto}}</p>
                                </div>
                            </div>
                            </div>
                            </li>
                            </ul>
                            </div>
                            </div>
                            
                            </div-->
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <div class="progressPrincipal">
                                <table  id="padreTimeLine">
                                    <tr>
                                        <td  ng-repeat='historico in HistoricoOrden' class="center" style="width: {{100 / HistoricoOrden.length}}%;" ng-class="{'activeTimeLine':historico.idOrden>0, '':''}" >
                                            <span class="m-b-xs">
                                            <strong>{{historico.nombreEstatusOrden}}</strong>
                                            </span>
                                            <br>
                                            <span class="glyphicon glyphicon-user" ng-show="historico.idOrden>0"> {{historico.nombreCompleto}}
                                            </span>
                                            <br>
                                            <span class="fechaTimeLine" ng-show="historico.idOrden>0">
                                            <strong>{{historico.fecha | date:"dd/MM/yyyy hh:mm"  }}</strong>
                                            </span>
                                        </td>
                                    </tr>
                                </table>
                                <div ng-repeat="cotz in HistoricoCotizaciones | orderBy:'consecutivo'" class="col-xs-12 col-sm-12 col-md-12 col-lg-12" >
                                    <div id= "numCotizacion" class="col-xs-3 col-sm-3 col-md-3 col-lg-3 center">{{cotz.data[0].numeroCotizacion}}</div>
                                    <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                                        <table id="subTimeLine">
                                            <tr>
                                                <td  ng-repeat="cot in cotz.data" class="center" style="width: {{100 / cotz.data.length}}%;" ng-class="{'activeSubTimeLine':cot.idCotizacion>0, '':''}" >
                                                    <span class="m-b-xs">
                                                    <strong>{{cot.nombreEstatusCotizacion}}</strong>
                                                    </span>
                                                    <br>
                                                    <span class="glyphicon glyphicon-user" ng-show="cot.idCotizacion>0"> {{cot.nombreCompleto}}
                                                    </span>
                                                    <br>
                                                    <span class="fechaTimeLine" ng-show="cot.idCotizacion>0">
                                                    <strong>{{cot.fecha | date:"dd/MM/yyyy hh:mm"  }}</strong>
                                                    </span>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <div class="progressPrincipal">
                                <div id="padreTimeLine">
                                    <ul class="timeline timeline-horizontal">
                                        <li class="timeline-item" ng-repeat='historico in HistoricoOrden'>
                            
                                            <div class="timelnie-item">
                                                <div class="row">
                                                    <div class="col-xs-3 date">
                                                        <small class="text-navy">{{historico.fecha | date:"dd/MM/yyyy hh:mm"  }}</small>
                                                    </div>
                                                    <div class="col-xs-7 content no-top-border">
                                                        <p class="m-b-xs">
                                                            <strong>{{historico.nombreEstatusOrden}}</strong>
                                                        </p>
                                                        <p class="glyphicon glyphicon-user">
                                                            <strong>{{historico.nombreCompleto}}</strong>
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                <div ng-repeat="cotz in HistoricoCotizaciones | orderBy:'consecutivo'" class="col-xs-10 col-sm-10 col-md-10 col-lg-10" id="subTimeLine">
                                    <strong id= "numCotizacion">{{cotz.data[0].numeroCotizacion}}</strong>
                                    <ul class="timeline timeline-horizontal">
                                        <li class="timeline-item" ng-repeat="cot in cotz.data">
                                            <div class="timelnie-item">
                                                <div class="row">
                                                    <div class="col-xs-3 date">
                                                        <small class="text-navy">{{cot.fecha | date:"dd/MM/yyyy hh:mm"  }}</small>
                                                    </div>
                                                    <div class="col-xs-7 content no-top-border">
                                                        <p class="m-b-xs">
                                                            <strong>{{cot.nombreEstatusCotizacion}}</strong>
                                                        </p>
                                                        <p class="glyphicon glyphicon-user">
                                                            <strong>{{cot.nombreCompleto}}</strong>
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            </div-->
                        <!--div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <div class="progressPrincipal">
                                <div class="progressBarraPadre">
                                    <div ng-repeat='historico in HistoricoOrden' class="progressBarra" style="width: {{historico.PorcentajeTotal}}%">
                                        <a href="#" title='<img alt="image" class="img-circle" src="image/profile/man2.jpg"> {{historico.nombreCompleto}}' data-toggle="popover" data-placement="top" data-trigger="hover" data-content='<p>Fecha: {{historico.fecha | date:"dd/MM/yyyy" }}</p> <p>Hora: {{historico.fecha | date:"hh:mm:ss a" }}</p>'>{{historico.nombreEstatusOrden}}</a>
                                    </div>
                                </div>
                                <div ng-repeat="cotz in HistoricoCotizaciones | orderBy:'consecutivo'">
                                    <div class='subProgress'>
                                        <p class="padding">{{cotz.data[0].numeroCotizacion}}</p>
                                        <div ng-class="{'subProgressBarra':cot.idEstatusCotizacion!= 4, 'subProgressBarraCancelada': cot.idEstatusCotizacion==4}" ng-repeat="cot in cotz.data" style="width: {{cot.Porcentaje}}%;">
                                            <a href="#" title='<img alt="image" class="img-circle" src="image/profile/man2.jpg"> {{cot.nombreCompleto}}' data-toggle="popover" data-placement="top" data-trigger="hover" data-content='<p>Fecha: {{cot.fecha | date:"dd/MM/yyyy" }}</p> <p>Hora: {{cot.fecha | date:"hh:mm:ss a" }}</p> '>
                                            {{cot.nombreEstatusCotizacion}}
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            </div-->
                        <div class="col-xs-12 col-sm-12">
                            <div class="hr-line-dashed"></div>
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                <div class="ibox float-e-margins">
                                    <div class="ibox-title">
                                        <h5>Detalle de la orden</h5>
                                    </div>
                                    <div class="ibox-content">
                                        <p>
                                            <label>Descripción de la Orden:</label>
                                            <span>{{detalleOrden.comentarioOrden}}</span>
                                        </p>
                                        <p>
                                            <label>Número Economico: </label>
                                            <span>{{detalleOrden.numeroEconomico}}</span>
                                        </p>
                                        <p>
                                            <label>Placas:</label>
                                            <span>{{detalleOrden.placas}}</span>
                                        </p>
                                        <p>
                                            <label>VIN:</label>
                                            <span>{{detalleOrden.vin}}</span>
                                        </p>
                                        <p>
                                            <label>Marca-Modelo: </label>
                                            <span>{{detalleOrden.marca}}  {{detalleOrden.submarca}} - {{detalleOrden.modelo}}</span>
                                        </p>
                                        <p>
                                            <label>Versión:</label>
                                            <span>{{detalleOrden.version}}</span>
                                        </p>
                                        <p>
                                            <label>Tipo de Unidad:</label>
                                            <span>{{detalleOrden.tipoUnidad}}</span>
                                        </p>
                                        <p ng-show="userData.geolocalizacion == 1">
                                            <label>Ubicación:</label>
                                            <span>{{detalleOrden.gps}}</span>
                                        </p>
                                        <p>
                                            <label>Zona:</label>
                                            <span>{{detalleOrden.nombreZona}}</span>
                                        </p>
                                        <p>
                                            <label>Plan de Acción:</label>
                                            <span>{{detalleOrden.accion}}</span>
                                        </p>
                                        <p ng-show="detalleOrden.idGarantia==1">
                                            <label>Motivo por Garantia:</label>
                                            <span>{{detalleOrden.motivoGarantia}}</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                <div class="ibox float-e-margins">
                                    <div class="ibox-title">
                                        <h5>Detalle del Cliente</h5>
                                    </div>
                                    <div class="ibox-content">
                                        <p>
                                            <label>Cliente:</label>
                                            <span>{{detalleCliente.nombreComercial}}</span>
                                        </p>
                                        <p>
                                            <label>Dirección:</label>
                                            <span>{{detalleCliente.direccion}}</span>
                                        </p>
                                        <p>
                                            <label>Teléfono: </label>
                                            <span>{{detalleCliente.telefono}}</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <div class="hr-line-dashed"></div>
                        </div>
                        <!-- Eidencias por orden -->
                        <!-- <div class="col-sm-12 col-md-6 col-lg-6" ng-hide="validaCertificado != 0"> -->
                        <!-- <h2>Evidencias</h2> -->
                        <!-- </div> -->
                        <div class="col-sm-12 col-md-6 col-lg-6">
                            <h3>Catálogo de Evidencias</h3>
                            <div class="carousel slide" id="carousel1" ng-hide="validaCertificado == 0">
                                <div class="carousel-inner">
                                    <div class="item itamCarousel"  ng-class="{active:!$index}" ng-repeat="evidencia in detalleEvidencias">
                                        <img
                                            ng-show="evidencia.tipo == 'jpg'
                                            || evidencia.tipo == 'JPG'
                                            || evidencia.tipo == 'jpeg'
                                            || evidencia.tipo == 'JPEG'
                                            || evidencia.tipo == 'png'
                                            || evidencia.tipo == 'PNG'
                                            || evidencia.tipo == 'gif'
                                            || evidencia.tipo == 'GIG'
                                            || evidencia.tipo == 'bmp'
                                            || evidencia.tipo == 'BMP'"
                                            alt="image"
                                            title ="{{evidencia.tipo}}"
                                            class="img-responsive"
                                            src="{{evidencia.ruta}}" />
                                        <div ng-show="evidencia.tipo == 'xml' || evidencia.tipo == 'XML'" class="item-no-img">
                                            <a href="{{evidencia.ruta}}" class="documentos" download="">
                                                <div class="gal-ico">
                                                    <i class="fa fa-file-code-o" aria-hidden="true"></i>
                                                    <p>{{evidencia.nombreEvidencia}}</p>
                                                </div>
                                            </a>
                                        </div>
                                        <div ng-show="evidencia.tipo == 'pdf' || evidencia.tipo == 'PDF'" class="item-no-img">
                                            <object style="width: 100%; height: 100%" data="{{evidencia.ruta}}" type="application/pdf">
                                                <embed src="{{evidencia.ruta}}" type="application/pdf" />
                                            </object>
                                        </div>
                                        <div ng-show="evidencia.tipo == 'xls' || evidencia.tipo == 'xlsx'  || evidencia.tipo == 'XLS' || evidencia.tipo == 'XLSX'" class="item-no-img">
                                            <a href="{{evidencia.ruta}}" class="documentos" download="">
                                                <div class="gal-ico">
                                                    <i class="fa fa-file-excel-o" aria-hidden="true"></i>
                                                    <p>{{evidencia.nombreEvidencia}}</p>
                                                </div>
                                            </a>
                                        </div>
                                        <div ng-show="evidencia.tipo == 'txt' || evidencia.tipo == 'TXT'" class="item-no-img">
                                            <a href="{{evidencia.ruta}}" class="documentos" download="">
                                                <div class="gal-ico">
                                                    <i class="fa fa-file-text-o" aria-hidden="true"></i>
                                                    <p>{{evidencia.nombreEvidencia}}</p>
                                                </div>
                                            </a>
                                        </div>
                                        <div ng-show="evidencia.tipo == 'zip' || evidencia.tipo == 'rar' || evidencia.tipo == 'ZIP' || evidencia.tipo == 'RAR'" class="item-no-img">
                                            <a href="{{evidencia.ruta}}" class="documentos" download="">
                                                <div class="gal-ico">
                                                    <i class="fa fa-file-archive-o" aria-hidden="true"></i>
                                                    <p>{{evidencia.nombreEvidencia}}</p>
                                                </div>
                                            </a>
                                        </div>
                                        <div ng-show="evidencia.tipo == 'doc' || evidencia.tipo == 'docx' || evidencia.tipo == 'DOC' || evidencia.tipo == 'DOCX'" class="item-no-img">
                                            <a href="{{evidencia.ruta}}" class="documentos" download="">
                                                <div class="gal-ico">
                                                    <i class="fa fa-file-word-o" aria-hidden="true"></i>
                                                    <p>{{evidencia.nombreEvidencia}}</p>
                                                </div>
                                            </a>
                                        </div>
                                        <div ng-show="evidencia.tipo != 'jpg'
                                            && evidencia.tipo != 'JPG'
                                            && evidencia.tipo != 'jpeg'
                                            && evidencia.tipo != 'JPEG'
                                            && evidencia.tipo != 'png'
                                            && evidencia.tipo != 'PNG'
                                            && evidencia.tipo != 'gif'
                                            && evidencia.tipo != 'GIF'
                                            && evidencia.tipo != 'bmp'
                                            && evidencia.tipo != 'BMP'
                                            && evidencia.tipo != 'xml'
                                            && evidencia.tipo != 'XML'
                                            && evidencia.tipo != 'pdf'
                                            && evidencia.tipo != 'PDF'
                                            && evidencia.tipo != 'xls'
                                            && evidencia.tipo != 'XLS'
                                            && evidencia.tipo != 'xlsx'
                                            && evidencia.tipo != 'XLSX'
                                            && evidencia.tipo != 'txt'
                                            && evidencia.tipo != 'TXT'
                                            && evidencia.tipo != 'zip'
                                            && evidencia.tipo != 'ZIP'
                                            && evidencia.tipo != 'rar'
                                            && evidencia.tipo != 'RAR'
                                            && evidencia.tipo != 'doc'
                                            && evidencia.tipo != 'DOC'
                                            && evidencia.tipo != 'docx'
                                            && evidencia.tipo != 'DOCX'"
                                            class="item-no-img">
                                            <a href="{{evidencia.ruta}}" class="documentos" download="">
                                                <div class="gal-ico">
                                                    <i class="fa fa-file-o" aria-hidden="true"></i>
                                                    <p>{{evidencia.nombreEvidencia}}</p>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <a data-slide="prev" href="#carousel1" class="left carousel-control iconCarousel">
                                <span class="icon-prev"></span>
                                </a>
                                <a data-slide="next" href="#carousel1" class="right carousel-control iconCarousel">
                                <span class="icon-next"></span>
                                </a>
                            </div>
                            <br/>
                            <div class="contenedor" style="width: 100%; height: 150px;">
                                <table width="100%" border="0" cellspacing="40" cellpadding="40">
                                    <tr>
                                        <td style="width: 200px;" align="center" ng-repeat="evidencia in detalleEvidencias">
                                            <a href="{{evidencia.ruta}}" class="documentos" download="">
                                                <div class="gal-ico-thums" ng-show="evidencia.tipo == 'jpg'
                                                    || evidencia.tipo == 'JPG'
                                                    || evidencia.tipo == 'jpeg'
                                                    || evidencia.tipo == 'JPEG'
                                                    || evidencia.tipo == 'png'
                                                    || evidencia.tipo == 'PNG'
                                                    || evidencia.tipo == 'gif'
                                                    || evidencia.tipo == 'GIG'
                                                    || evidencia.tipo == 'bmp'
                                                    || evidencia.tipo == 'BMP'">
                                                    <img alt="image"
                                                        class=""
                                                        width="100"
                                                        src="{{evidencia.ruta}}">
                                                    <p>{{evidencia.nombreEvidencia}}</p>
                                                </div>
                                                <div class="gal-ico-thums" ng-show="evidencia.tipo == 'xml'">
                                                    <i class="fa fa-file-code-o" aria-hidden="true"></i>
                                                    <p>{{evidencia.nombreEvidencia}}</p>
                                                </div>
                                                <div class="gal-ico-thums" ng-show="evidencia.tipo == 'pdf'">
                                                    <i class="fa fa-file-pdf-o" aria-hidden="true"></i>
                                                    <p>{{evidencia.nombreEvidencia}}</p>
                                                </div>
                                                <div class="gal-ico-thums"
                                                    ng-show="evidencia.tipo == 'xls' || evidencia.tipo == 'xlsx'">
                                                    <i class="fa fa-file-excel-o" aria-hidden="true"></i>
                                                    <p>{{evidencia.nombreEvidencia}}</p>
                                                </div>
                                                <div class="gal-ico-thums"
                                                    ng-show="evidencia.tipo == 'txt'">
                                                    <i class="fa fa-file-text-o" aria-hidden="true"></i>
                                                    <p>{{evidencia.nombreEvidencia}}</p>
                                                </div>
                                                <div class="gal-ico-thums"
                                                    ng-show="evidencia.tipo == 'zip' || evidencia.tipo == 'rar'">
                                                    <i class="fa fa-file-archive-o" aria-hidden="true"></i>
                                                    <p>{{evidencia.nombreEvidencia}}</p>
                                                </div>
                                                <div class="gal-ico-thums"
                                                    ng-show="evidencia.tipo == 'doc' || evidencia.tipo == 'docx'">
                                                    <i class="fa fa-file-word-o" aria-hidden="true"></i>
                                                    <p>{{evidencia.nombreEvidencia}}</p>
                                                </div>
                                                <div class="gal-ico-thums"
                                                    ng-show="
                                                    evidencia.tipo != 'jpg'
                                                    && evidencia.tipo != 'JPG'
                                                    && evidencia.tipo != 'jpeg'
                                                    && evidencia.tipo != 'JPEG'
                                                    && evidencia.tipo != 'png'
                                                    && evidencia.tipo != 'PNG'
                                                    && evidencia.tipo != 'gif'
                                                    && evidencia.tipo != 'GIF'
                                                    && evidencia.tipo != 'bmp'
                                                    && evidencia.tipo != 'BMP'
                                                    && evidencia.tipo != 'xml'
                                                    && evidencia.tipo != 'XML'
                                                    && evidencia.tipo != 'pdf'
                                                    && evidencia.tipo != 'PDF'
                                                    && evidencia.tipo != 'xls'
                                                    && evidencia.tipo != 'XLS'
                                                    && evidencia.tipo != 'xlsx'
                                                    && evidencia.tipo != 'XLSX'
                                                    && evidencia.tipo != 'txt'
                                                    && evidencia.tipo != 'TXT'
                                                    && evidencia.tipo != 'zip'
                                                    && evidencia.tipo != 'ZIP'
                                                    && evidencia.tipo != 'rar'
                                                    && evidencia.tipo != 'RAR'
                                                    && evidencia.tipo != 'doc'
                                                    && evidencia.tipo != 'DOC'
                                                    && evidencia.tipo != 'docx'
                                                    && evidencia.tipo != 'DOCX'
                                                    ">
                                                    <i class="fa fa-file-o" aria-hidden="true"></i>
                                                    <p>{{evidencia.nombreEvidencia}}</p>
                                                </div>
                                            </a>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div class="wrapper wrapper-content" ng-hide="validaCertificado == 0">
                                <br/>
                                <form id="frm_evidencia" name="frm_evidencia" enctype="multipart/form-data" method="post">
                                    <label>Carga Evidencia</label>
                                    <br>
                                    <input type="hidden" value="{{idOrden}}" name="idOrden">
                                    <input type="hidden" value="{{docServer}}" name="docServer">
                                    <input type="file" name="myFile1" id="myFile1" class="inputfile inputfile-3" accept="*/*"/>
                                    <label for="myFile1">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="iborrainputfile" width="30" height="27" viewBox="0 0 20 17">
                                            <path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"></path>
                                        </svg>
                                        <span class="iborrainputfile lbl_evidencia">Seleccionar archivo</span>
                                    </label>
                                    <br>
                                    <input class="btn btn-warning btn-evidencia" type="submit" name="submit" id="myButton" ng-click="subirEvidencias()">
                                </form>
                            </div>
                        </div>
                        <!-- Documentos por orden -->
                        <div class="col-sm-12 col-md-6 col-lg-6">
                            <h3>Documentación de la Orden</h3>
                            <div class="m-t-xl">
                                <div class="col-sm-3 col-md-3 col-lg-3 text-center">
                                    <label>Recepción</label>
                                    <br>
                                    <button class="btn btn-archivo btn-large-dim btn-outline m-t-md"
                                        type="button"
                                        ng-click="archivoEvidencia(1);"
                                        ng-disabled="validaCertificado == 0"
                                        ng-class="{btn_archivo_yep: validaCertificado != 0}">
                                    <i class="fa fa-file-pdf-o"></i>
                                    </button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 text-center">
                                    <label>Hoja de Trabajo</label>
                                    <br>
                                    <button class="btn btn-archivo btn-large-dim btn-outline m-t-md"
                                        type="button"
                                        ng-click="OpenTrabajo();"
                                        ng-disabled="idEstatusOrden < 7"
                                        ng-class="{btn_archivo_yep: idEstatusOrden >= 7}">
                                    <i class="fa fa-file-pdf-o"></i>
                                    </button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 text-center">
                                    <label>Factura</label>
                                    <br>
                                    <button class="btn btn-archivo  btn-large-dim btn-outline m-t-md"
                                        type="button"
                                        ng-disabled="totalfacturas == 0"
                                        ng-class="{btn_archivo_yep: totalfacturas != 0}"
                                        ng-click="OpenModalShowFactura()" >
                                    <i class="fa fa-file-pdf-o"></i>
                                    </button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 text-center">
                                    <label>Orden de Pago</label>
                                    <br>
                                    <button class="btn btn-archivo  btn-large-dim btn-outline m-t-md"
                                        type="button"
                                        ng-disabled="true">
                                    <i class="fa fa-file-pdf-o"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <div class="hr-line-dashed"></div>
                        </div>
                        <!--Costos totales de las  cotizaciones-->
                        <div class="col-xs-4 col-md-4 col-sm-4 col-lg-4" ng-show="estatus==4  && userData.presupuesto == 1">
                            <div >
                                <h3>Presupuesto</h3>
                                <p>
                                    <label>Centro de Trabajo: </label>
                                    <span >{{centroTrabajo}}</span>
                                </p>
                                <p>
                                    <label>Presupuesto: </label>
                                    <span ng-class="(totalSumaVenta * 1.16) > (saldos.presupuesto-saldos.saldoDisponible) ?  'sinPresupuesto' : ''">{{saldos.presupuesto | currency:"$": 2}}</span>
                                </p>
                                <p>
                                    <label>Saldo Disponible: </label>
                                    <span ng-class="(totalSumaVenta * 1.16) > (saldos.presupuesto-saldos.saldoDisponible) ?  'sinPresupuesto' : ''">{{saldos.presupuesto-saldos.saldoDisponible| currency:"$": 2}}</span>
                                </p>
                                <!-- <p>
                                    <label>Saldo Real: </label>
                                    <span ng-class="(totalSumaVenta * 1.16) > (saldos.presupuesto-saldos.saldoReal) ? 'sinPresupuesto' : ''">{{saldos.presupuesto-saldos.saldoReal| currency:"$": 2}}</span>
                                    </p> -->
                            </div>
                        </div>
                        <div class="col-xs-4 col-md-4 col-sm-4 col-lg-4">
                            <div ng-show="userData.idRol == 2 || userData.idRol == 3">
                                <!--h3>Utilidad</h3-->
                                <p>
                                    <label>Utilidad Minima de la Operación: </label>
                                    <span >{{userData.porcentajeUtilidad | currency:"%": 2}}</span>
                                </p>
                                <p>
                                    <label>Utilidad de la Orden: </label>
                                    <span ng-class="((totalSumaVenta - totalSumaCosto)*100)/ totalSumaVenta < (userData.porcentajeUtilidad) ?  'sinPresupuesto' : ''">{{((totalSumaVenta - totalSumaCosto)*100)/ totalSumaVenta | currency:"%": 2}}</span>
                                </p>
                                <p>
                                    <label>Monto de la Utilidad: </label>
                                    <span>{{totalSumaVenta - totalSumaCosto | currency:"$": 2}}</span>
                                </p>
                            </div>
                        </div>
                        <div class="col-xs-4 col-md-4 col-sm-4 col-lg-4" ng-hide="estatus==4  && userData.presupuesto == 1">
                        </div>
                        <div class="col-xs-4 col-md-4 col-sm-4 col-lg-4">
                            <div ng-show="orden.IdTipoOrden = 2">
                                <table class="table invoice-total">
                                    <tbody>
                                        <tr>
                                            <td><strong>SUBTOTAL :</strong></td>
                                            <td>{{btnSwitch.showCostoVenta == true ? totalSumaCosto : totalSumaVenta | currency}}</td>
                                        </tr>
                                        <tr>
                                            <td><strong>I.V.A :</strong></td>
                                            <td>{{btnSwitch.showCostoVenta == true ? totalSumaCosto * 0.16 : totalSumaVenta * 0.16 | currency}}</td>
                                        </tr>
                                        <tr>
                                            <td><strong>TOTAL :</strong></td>
                                            <td>{{btnSwitch.showCostoVenta == true ? totalSumaCosto * 1.16 : totalSumaVenta * 1.16 | currency}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <!--Ordenes en Aprobación-->
                        <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12 smallerFont panelCotizaciones">
                            <!--Cotizaciones Grua-->
                            <div class="row" ng-show="(orden.IdTipoOrden == 2 || orden.IdTipoOrden == 1)" ng-repeat="cotizacion in cotizaciones">
                                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                    <div class="panel panel-default">
                                        <div class="panel-body">
                                            <div class="pestania">
                                                <h3>{{ cotizacion.numeroCotizacion }}</h3>
                                            </div>
                                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"></div>
                                            <div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
                                                <h4>Detalle de la Cotización</h4>
                                                <address>
                                                    <strong>Estatus: </strong>
                                                    <span class="label label-success mayusculas">{{cotizacion.nombreEstatusCotizacion}} </span>
                                                    <br/> <br/><strong>Usuario Creador: </strong> <span>{{cotizacion.nombreCompleto}}</span>
                                                    <br><strong>Fecha de Creación: </strong> <span>{{cotizacion.fechaCotizacion | date:"dd/MM/yyyy"}}</span>
                                                </address>
                                            </div>
                                            <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2"></div>
                                            <div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
                                                <h4>Detalle de Proveedor</h4>
                                                <address>
                                                    <strong>Taller: </strong><span>{{cotizacion.razonSocial}}</span>
                                                    <br><strong>Dirección: </strong> <span>{{cotizacion.direccion}}</span>
                                                </address>
                                            </div>
                                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                                <div class="btn-group pull-right" ng-hide="hideSwitchBtn">
                                                    <button type="button" ng-class="btnSwitch.classCosto" ng-click="btnSwitch.showCostoVenta=true;
                                                        btnSwitch.classVenta='btn btn-default';
                                                        btnSwitch.classCosto='btn btn-success'">Costo</button>
                                                    <button type="button" ng-class="btnSwitch.classVenta" ng-click="btnSwitch.showCostoVenta=false;
                                                        btnSwitch.classVenta='btn btn-success';
                                                        btnSwitch.classCosto='btn btn-default'">Venta</button>
                                                </div>
                                                <button class="btn btn-primary pull-right cargar-factura"  ng-show="estatus == 5 && cotizacion.factura == 0" ng-click="OpenModalFactura( cotizacion.idOrden,cotizacion.consecutivoCotizacion,cotizacion.sumaCosto );">
                                                Cargar Factura {{ }}
                                                </button>
                                                <!-- <button class="btn btn-success pull-right cargar-factura" ng-show="estatus == 5 && cotizacion.factura != 0">
                                                    Factura Cargada
                                                    </button> -->
                                                <span
                                                    class="label label-primary pull-right cargar-factura"
                                                    ng-show="estatus == 5 && cotizacion.factura != 0"
                                                    style="padding: 10px 13px">
                                                FACTURA CARGADA
                                                </span>
                                            </div>
                                            <br>
                                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                                <div class="table-responsive m-t">
                                                    <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <th ng-hide="true">idEspecialidad</th>
                                                                <th>Especialidad</th>
                                                                <th ng-hide="true">idPartidaClasificacion</th>
                                                                <th>Clasificación</th>
                                                                <th ng-hide="true">idPartidaSubClasificacion</th>
                                                                <th>Subclasificación</th>
                                                                <th>Partida</th>
                                                                <th>No. Parte</th>
                                                                <th>Descripción</th>
                                                                <th>Foto</th>
                                                                <th>Instructivo</th>
                                                                <th>Cantidad</th>
                                                                <th ng-show="btnSwitch.showCostoVenta">Costo Unitario</th>
                                                                <th ng-show="btnSwitch.showCostoVenta">Costo</th>
                                                                <th ng-hide="btnSwitch.showCostoVenta">Venta Unitario</th>
                                                                <th ng-hide="btnSwitch.showCostoVenta">Venta</th>
                                                                <th ng-show="estatus == 4">Aprobar</th>
                                                                <th ng-show="estatus == 4">Rechazar</th>
                                                                <th ng-show="false">&nbsp;</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="partida in cotizacion.detalle"
                                                                ng-init="partida.rowColor='info'; setRowColor(partida)" class="{{partida.rowColor}}" >
                                                                <td ng-hide="true">{{partida.idEspecialidad}}</td>
                                                                <td>{{partida.especialidad}}</td>
                                                                <td ng-hide="true">{{partida.idPartidaClasificacion}}</td>
                                                                <td>{{partida.clasificacion}}</td>
                                                                <td ng-hide="true">{{partida.idPartidaSubClasificacion}}</td>
                                                                <td>{{partida.subClasificacion}}</td>
                                                                <td>{{partida.partida}}</td>
                                                                <td>{{partida.noParte}}</td>
                                                                <td>{{partida.descripcion}}</td>
                                                                <td class="center">
                                                                    <!--{{partida.foto}}-->
                                                                    <span class="label label-warning"><i class="glyphicon glyphicon-camera" data-toggle="tooltip" tooltip="Foto" id="cursorPoint"></i></span>
                                                                </td>
                                                                <td class="center">
                                                                    <!--{{partida.instructivo}}-->
                                                                    <span class="label label-success"><i class="glyphicon glyphicon-file" data-toggle="tooltip" tooltip="Instructivo" id="cursorPoint"></i></span>
                                                                </td>
                                                                <td>{{partida.cantidad}}</td>
                                                                <td ng-show="btnSwitch.showCostoVenta" class="text-right">{{partida.costo | currency}}</td>
                                                                <td ng-show="btnSwitch.showCostoVenta" class="text-right">{{partida.costoTotal | currency}}</td>
                                                                <td ng-hide="btnSwitch.showCostoVenta" class="text-right">{{partida.venta | currency}}</td>
                                                                <td ng-hide="btnSwitch.showCostoVenta" class="text-right">{{partida.ventaTotal | currency}}</td>
                                                                <td ng-show="estatus == 4" >
                                                                    <div class="col-xs-offset-4 col-sm-offset-4 col-md-offset-4 col-lg-offset-4">
                                                                        <input type="radio"
                                                                            ng-init="partida.btnDisabled=true;
                                                                            partida.selOption=1;
                                                                            initApproveButtons(partida);"
                                                                            ng-disabled="partida.btnDisabled"
                                                                            ng-model="partida.selOption"
                                                                            value="2" >
                                                                    </div>
                                                                </td>
                                                                <td ng-show="estatus == 4" >
                                                                    <div class="col-xs-offset-4 col-sm-offset-4 col-md-offset-4 col-lg-offset-4">
                                                                        <input type="radio"
                                                                            ng-model="partida.selOption"
                                                                            ng-disabled="partida.btnDisabled"
                                                                            value="3" >
                                                                    </div>
                                                                </td>
                                                                <td ng-show="false" center>
                                                                    <input type="radio"
                                                                        ng-model="partida.selOption"
                                                                        ng-disabled="partida.btnDisabled"
                                                                        value="1"
                                                                        ng-hide="true">
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                        <tfoot>
                                                            <tr>
                                                                <td colspan="10">&nbsp;</td>
                                                                <td colspan="3" align="right">
                                                                    <a href="#"
                                                                        class="btn btn-success btn-xs"
                                                                        ng-show="estatus == 4"
                                                                        ng-click="modal_aprobacion( cotizacion.idCotizacion, cotizacion.idEstatusCotizacion )">
                                                                    <i class="fa fa-key" aria-hidden="true"></i> Aprobación por Token
                                                                    </a>
                                                                </td>
                                                            </tr>
                                                        </tfoot>
                                                    </table>
                                                </div>
                                                <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
                                                    <table class="table invoice-total">
                                                        <tbody>
                                                            <tr>
                                                                <td><strong>SUBTOTAL :</strong></td>
                                                                <td>{{ btnSwitch.showCostoVenta == true ? cotizacion.sumaCosto : cotizacion.sumaVenta | currency}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>I.V.A :</strong></td>
                                                                <td>{{ btnSwitch.showCostoVenta == true ? cotizacion.sumaCosto * 0.16 : cotizacion.sumaVenta * 0.16 | currency}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>TOTAL :</strong></td>
                                                                <td>{{ btnSwitch.showCostoVenta == true ? cotizacion.sumaCosto * 1.16 : cotizacion.sumaVenta * 1.16 | currency}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    <div ng-show="btn_editarCotizacion">
                                                        <button class="btn btn-primary pull-right btn-movil" data-loading-text="Loading..." type="submit" ng-click="editarCotizacion(cotizacion)">
                                                        <span class="{{class_buttonEditarCotizacion}}"></span>
                                                        Editar Cotización
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br>
                        
                        <!-- Notas -->
                        <div class="col-sm-12 col-md-6 col-lg-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    Notas
                                </div>
                                <div class="panel-body">
                                    <div class="col-sm-12 col-md-12 col-lg-12">
                                        <div class="my-scroll-nota">
                                            <div class="chat-activity-list">
                                                <div ng-repeat="notas in notaTrabajo">
                                                    <div class="chat-element">
                                                        <a href="#" ng-class="notas.idUsuario===userData.idUsuario ? 'pull-left' : 'pull-right'">
                                                        <img alt="image" class="img-circle" src="image/profile/man2.jpg">
                                                        </a>
                                                        <div class="media-body">
                                                            <small ng-class="notas.idUsuario===userData.idUsuario ? 'pull-right' : 'pull-left'">{{notas.tiempoTranscurrido}}</small>
                                                            <div ng-class="notas.idUsuario===userData.idUsuario ? 'pull-left' : 'pull-right'">
                                                                <strong>{{notas.nombreCompleto}}</strong>
                                                                <p>{{notas.nombreEstatus}}</p>
                                                                <p class="m-b-xs">
                                                                    {{notas.texto}}
                                                                </p>
                                                                <small class="text-muted">{{notas.fecha |  date:'medium'}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="chat-form">
                                            <form role="form">
                                                <div class="form-group">
                                                    <textarea class="form-control nota-input" placeholder="Escriba una nota" ng-model="textoNota"></textarea>
                                                </div>
                                                <div class="text-right">
                                                    <button type="submit" class="btn btn-sm btn-primary m-t-n-xs" ng-click="enviaNota()">Enviar Nota</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        
                        <!-- /Seccion es para los estatus de procesos, termino trabajo y entrega de la Orden -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<br><br>

<div class="controles-fixed">
    <div class="contenedor">
        <div class="col-xs-5">
            <table class="table tbl-accion">
                <tr>
                    <td class="header" width="120">
                        <label>Plan de Acción:</label><br>
                        <button class="btn btn-primary btn-xs" ng-click="OpenModalPlanAccion();">Agregar Acción</button>
                    </td>
                    <td> <p class="accion-detalle">{{detalleOrden.accion}}</p> </td>
                </tr>
            </table>
        </div>
        <div class="col-xs-7" id="footerDetalle">
            <div class="col-xs-12">
                <div class="tokenMargen" ng-show="show_tokenMargen">                    
                    <div class="token-group pull-right" role="group" aria-label="...">
                        <input type="text" ng-model="token_utilidad" placeholder="Token de Utilidad">
                        <button class="btn btn-primary pull-right btn-movil" type="button" ng-click="ValidaUtilidad();">Aceptar</button>
                    </div>
                </div>

                <div class="btn-group pull-right botoneses3" role="group" style="margin-right: 10px; ">
                    <button ng-hide="btnMoradoIsEnable" data-loading-text="Loading..." 
                        ng-disabled="detalleOrden.idEstatusOrden == 4" style="display: {{ detalleOrden.idEstatusOrden == 4 ? 'none' : 'block' }}" class="btn btn-morado btn-movil" 
                        type="submit" ng-click="validateEstatusAprobacion()" ng-show="!show_tokenMargen">
                    <span class="{{class_buttonEnviaAprobacion}}"></span> Enviar a Aprobación
                    </button>
                    <button ng-hide="btnNegroIsEnable" class="btn btn-negro btn-movil" type="submit">Negro</button>
                    <button ng-hide="btnCancelarCitaIsEnable" class="btn btn-rojo btn-movil" type="submit">Cancelar Cita</button>
                    <button ng-hide="btnEditarCitaIsEnable" data-loading-text="Loading..." 
                        ng-disabled="validaCertificado !=0" style="display: {{ validaCertificado !=0 ? 'none' : 'block' }}" class="btn btn-warning btn-movil" type="submit" ng-click="editarCita()">
                    <span class="{{class_buttonEditarCita}}"></span> Editar Cita
                    </button>
                    <button ng-hide="btnComprobanteRecepcionIsEnable" data-loading-text="Loading..." 
                        ng-disabled="validaCertificado !=0" style="display: {{ validaCertificado !=0 ? 'none' : 'block' }}" class="btn btn-info btn-movil" type="submit" ng-click="comprobante()">
                    <span class="{{class_buttonComprobanteRecepcion}}"></span> Comprobante de Recepción
                    </button>
                    <button ng-hide="btnNuevaCotizacionIsEnable" data-loading-text="Loading..." 
                        class="btn btn-success btn-movil" type="submit" ng-click="nuevaCotizacion()">
                    <span class="{{class_buttonNuevaCotizacion}}"></span> Nueva Cotización
                    </button>
                    <button ng-hide="btnGuardaCotizacionIsEnable" data-loading-text="Loading..." 
                        class="btn btn-primary btn-movil" ng-click="btnSaveCotizacion( idUsuario )">
                    <span class="{{class_buttonGuardaCotizacion}}"></span> Guarda Cotizacion
                    </button>
                    <button ng-hide="btnEditarIsEnable" class="btn btn-success btn-movil" type="submit"> Editar</button>
                </div>
            </div>
        
            <!-- / -->

            <!-- Seccion es para los estatus de procesos, termino trabajo y entrega de la Orden -->
            <div class="col-sm-12" ng-show="idEstatusOrden==5 && estatus==5" ;>
                <div class="btn-group pull-right" role="group" aria-label="...">
                    <!--VALIDAR USUARIO PARA PROVISIONES-->
                    <button class="btn btn-success btn-movil" type="button"  ng-click="aprobarProvision(provision)" ng-show="userData.idRol == 2" >
                    Aprobación Provisión
                    </button>
                    <button class="btn btn-primary btn-movil" data-loading-text="Loading..." type="button" ng-click="ValidaTerminoTrabajo();">
                    <span class="{{class_buttonTerminaTrabajo}}"></span> Terminar Trabajo
                    </button>
                </div>
            </div>
            <!-- / -->

            <!-- Seccion para el token de administrador -->
            <div class="" ng-show="idEstatusOrden==6 && estatus==5">
                <div class="col-xs-12">
                    <div class="token-group pull-right" role="group" aria-label="...">
                        <input type="text" ng-model="token_termino" placeholder="Token de Administrador">
                        <button class="btn btn-primary pull-right btn-movil" type="button" ng-click="ValidaEntrega();">Aceptar</button>
                    </div>
                    

                    <div class="btn-group pull-right" role="group" style="margin-right: 10px; ">
                        <!--VALIDAR USUARIO PARA PROVISIONES-->
                        <button class="btn btn-success pull-right btn-movil" type="button"  ng-click="aprobarProvision(provision)" ng-show="userData.idRol == 2" >
                            Aprobación Provisión
                        </button>
                    </div>
                </div>
            </div>
            <!-- / -->
            
            <!-- Seccion para el token de cliente -->
            <div ng-show="idEstatusOrden==7">
                <div class="col-xs-12">
                    <div class="token-group pull-right" role="group" aria-label="...">
                        <input type="text" ng-model="token_termino" placeholder="Token de Cliente">
                        <button class="btn btn-primary pull-right btn-movil" type="button" ng-click="ValidaEntrega();">Aceptar</button>
                    </div>
                    

                    <div class="btn-group pull-right" role="group" style="margin-right: 10px; ">
                        <!--VALIDAR USUARIO PARA PROVISIONES-->
                        <button class="btn btn-success btn-movil" type="button"  ng-click="aprobarProvision(provision)" ng-show="userData.idRol == 2" > 
                            Aprobación Provisión
                        </button>

                        <button class="btn btn-danger" type="button" ng-click="RechazarTrabajo();">
                            Rechazar Trabajo
                        </button>
                    </div>
                </div>
            </div>
            <!-- / -->            
        </div>
    </div>
</div>

<!-- Modal Mostrar -->
<div class="modal fade" id="ModalShowToken" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Token Aprobaciones</h4>
            </div>
            <div class="modal-body">
                <p>Introduzca el token proporcionado por el usuario quien autoriza.</p>
                <br>
                <label>Token</label>
                <input type="text" ng-model="token_aprobacion" class="token_admin form-control">
                <br>
                <div class="alert alert-warning err_aprobacion" style="display: none;">
                    <strong>¡Atención!</strong> {{ err_apronacion }}
                </div>
            </div>
            <div class="modal-footer consulta">
                <button class="btn btn-primary pull-right btn-movil" type="button" ng-click="VerificaTokenAprobacion();">
                Aprobar partidas
                </button>
            </div>
        </div>
    </div>
</div>
<!-- Modal Mostrar -->
<div class="modal fade" id="ModalRechazoTrabajo" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Rechazar Trabajo</h4>
            </div>
            <div class="modal-body">
                <h4 class="center">¿Estas seguro?</h4>
                <br>
                <p class="center">Al rechazar el trabajo éste se cambiara a estatus 'En Proceso'.</p>
                <br>
                <label>Motivo</label>
                <input type="text" ng-model="motivo_rechazoTrabajo" class="token_admin form-control">
                <br>      
            </div>
            <div class="modal-footer consulta">
                <button class="btn btn-danger pull-right btn-movil" type="button" ng-click="aceptarRechazoTrabajo();">
                Rechazar
                </button>
            </div>
        </div>
    </div>
</div>
<!-- Modal Mostrar -->
<div class="modal fade" id="ModalShowFactura" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Facturas cargadas</h4>
            </div>
            <div class="modal-body">
                <div ng-show="facturas_empty">
                    <center>
                        <h1>Aún no se han cargado facturas</h1>
                    </center>
                </div>
                <div ng-show="!facturas_empty">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Cotización</th>
                                <th>PDF</th>
                                <th>XML</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="Fac in Facturas.data">
                                <td><b>{{Fac.numeroCotizacion}}</b></td>
                                <td>
                                    <a  ng-show="Fac.facturas[0].tipo == 'pdf'"
                                        href="{{Fac.facturas[0].rutaDocumento}}"
                                        target="_blanc">
                                    <i class="fa fa-file-pdf-o fac_pdf"></i>
                                    </a>
                                    <a  ng-show="Fac.facturas[1].tipo == 'pdf'"
                                        href="{{Fac.facturas[1].rutaDocumento}}"
                                        target="_blanc">
                                    <i class="fa fa-file-pdf-o fac_pdf"></i>
                                    </a>
                                </td>
                                <td>
                                    <a  ng-show="Fac.facturas[0].tipo == 'xml'"
                                        href="{{Fac.facturas[0].rutaDocumento}}"
                                        target="_blanc"
                                        download="Reporte2Mayo2010">
                                    <i class="fa fa-file-code-o fac_xml"></i>
                                    </a>
                                    <a  ng-show="Fac.facturas[1].tipo == 'xml'"
                                        href="{{Fac.facturas[1].rutaDocumento}}"
                                        target="_blanc"
                                        download="Reporte2Mayo2010">
                                    <i class="fa fa-file-code-o fac_xml"></i>
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                </div> -->
        </div>
    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <form id="frm_subir_factura" name="frm_subir_factura" method="post">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Carga de Factura</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="uploading" style="width: 100%; display: none;">
                            <center>
                                <img src="image/loading2.gif" width="250">
                            </center>
                        </div>
                        <div class="col-sm-12 archivos">
                            <input type="hidden" value="{{idOrden}}" name="idOrden">
                            <input type="hidden" value="{{cotizacionFactura}}" name="cotizacionFactura">
                            <input type="hidden" value="{{cotizacionTotal}}" name="cotizacionTotal">
                            <input type="hidden" value="{{docServer}}" name="docServer">
                            <!-- $rootScope.docServer -->
                            <label>XML</label>
                            <br>
                            <input type="file" name="file_1" id="file_1" class="inputfile inputfile-1" accept="text/xml" />
                            <label for="file_1">
                                <svg xmlns="http://www.w3.org/2000/svg" class="iborrainputfile" width="30" height="27" viewBox="0 0 20 17">
                                    <path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"></path>
                                </svg>
                                <span class="iborrainputfile">Seleccionar archivo</span>
                            </label>
                            <br>
                            <br>
                            <label>PDF</label>
                            <br>
                            <input type="file" name="file_2" id="file_2" class="inputfile inputfile-2" accept="application/pdf" />
                            <label for="file_2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="iborrainputfile" width="30" height="27" viewBox="0 0 20 17">
                                    <path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"></path>
                                </svg>
                                <span class="iborrainputfile">Seleccionar archivo</span>
                            </label>
                            <!-- <label>XML</label> <input type="file" accept="text/xml" name="myFile1" id="myFile1"> -->
                            <!-- <br> -->
                            <!-- <label>PDF</label> <input type="file" name="myFile2" id="myFile2"> -->
                            <br>
                        </div>
                        <div class="col-sm-12">
                            <br>
                            <div class="alert alert-warning alert_respuesta">
                                <strong>¡Factura cargada correctamente!</strong>
                                <br>
                                <br>
                                <table class="table borderless errores_factura"> </table>
                            </div>
                            <div class="alert alert-info" style="display: none;">
                                <strong>¡Nota!</strong> <span></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default btn-cerrar" data-dismiss="modal">Cerrar</button>
                    <button type="submit" class="btn btn-primary btn-subir" ng-click="Cargar_Factura_Tmp();">
                    <span class="{{class_buttonCargaFactura}}"></span>
                    Subir Factura
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>












<!-- Modal Mostrar -->
<div class="modal fade" id="ModalPlanAccion" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Plan de Acción</h4>
            </div>
            <div class="modal-body">
                <!-- Acciones -->
                <div class="row">
                    <form role="form">
                        <br>
                        <div class="col-sm-3 col-md-3 col-lg-3">
                            <label>Plan</label>
                        </div>
                        <div class="col-sm-9 col-md-9 col-lg-9">
                            <textarea name="message" placeholder="Escriba su plan de acción" ng-model="comentaAccion" style="width: 352px; height: 82px;"></textarea>
                            <!-- <input type="text" class="form-control"> -->
                        </div>
                        <div class="col-sm-3 col-md-3 col-lg-3 m-t">
                            <label>Fecha</label>
                        </div>
                        <div class="col-sm-5 col-md-5 col-lg-5 m-t">
                            <div class="input-group date">
                                <input type="text" class="form-control" value="" ng-model="fechaAccion" calendar>
                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                            </div>
                        </div>
                        <div class="col-sm-4 col-md-4 col-lg-4 m-t" style="padding-bottom: 15px;">
                            <!-- <button class="btn btn-sm btn-primary pull-right" ng-click="acciones()">Agregar Acción</button> -->
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-sm btn-primary pull-right" ng-click="acciones()">Agregar Acción</button>
            </div>
        </div>
    </div>
</div>




















<script>
    $(document).ready(function() {
        $(window).scroll(function (event) {
            var scroll = $(window).scrollTop();
            if( scroll <= 60 ){
                $(".controles-fixed").removeClass("entra");
            }else{
                $(".controles-fixed").addClass("entra");
            }
        });
    
        $('.scroll_content').slimscroll({
            //height: '580px',
            width: '100%'
        })
        setTimeout(function() {
            $('[data-toggle="popover"]').popover({
                html: true
            });
        }, 500);
    
    
    
    
        var inputs = document.querySelectorAll('.inputfile');
        Array.prototype.forEach.call(inputs, function(input) {
            var label = input.nextElementSibling,
                labelVal = label.innerHTML;
    
            input.addEventListener('change', function(e) {
                var fileName = '';
                if (this.files && this.files.length > 1)
                    fileName = (this.getAttribute('data-multiple-caption') || '').replace('{count}', this.files.length);
                else
                    fileName = e.target.value.split('\\').pop();
    
                if (fileName)
                    label.querySelector('span').innerHTML = fileName;
                else
                    label.innerHTML = labelVal;
            });
        });
    });

    var optFlag = true;
    var moreOptions = function(){
        if( optFlag ){
            $(".tokenMargen").fadeOut();                
            setTimeout( function(){
                $(".botoneses3").fadeIn();
            },200);
            optFlag = false;

            $(".mas-options .fa-angle-down").hide();
            $(".mas-options .fa-angle-up").show();
            $(".mas-options small").text('Introducir Token');
        }
        else{
            $(".botoneses3").fadeOut();
            setTimeout( function(){
                $(".tokenMargen").fadeIn();                
            },200);
            optFlag = true;

            $(".mas-options .fa-angle-down").show();
            $(".mas-options .fa-angle-up").hide();
            $(".mas-options small").text('Más Opciones');
        }

        // <div class="mas-options" onclick="moreOptions();">
        //     <small>Más Opciones</small><br>
        //     <i class="fa fa-angle-down" aria-hidden="true"></i>
        //     <i class="fa fa-angle-up" aria-hidden="true"></i>
        // </div>
    }
</script>